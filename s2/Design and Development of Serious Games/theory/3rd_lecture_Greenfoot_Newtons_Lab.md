# Greenfoot Newtons Lab

## Εισαγωγή στη Φυσική και Προσομοίωση (Slides 2-3)

*   **Ηλιακό Σύστημα (Slide 2):** Περιλαμβάνει τον Ήλιο και αντικείμενα (πλανήτες, αστεροειδείς, κομήτες κ.λπ.) που κινούνται γύρω του λόγω της βαρύτητας.
*   **Βαρύτητα, Μάζα, Βάρος (Slide 3):**
    *   **Βαρύτητα:** Η ιδιότητα των υλικών σωμάτων να έλκουν και να έλκονται αμοιβαία.
    *   **Μάζα:** Το μέτρο της αντίστασης ενός σώματος στη μεταβολή της κινητικής του κατάστασης (αδράνεια).
    *   **Βάρος:** Η δύναμη έλξης. Είναι μεγαλύτερη όταν τα σώματα είναι πλησιέστερα ή έχουν μεγαλύτερη μάζα.
*   **Προσομοίωση:** Για να προσομοιώσουμε ένα τέτοιο σύστημα, χρειαζόμαστε να μοντελοποιήσουμε αυτά τα φυσικά μεγέθη (μάζα, θέση, ταχύτητα, δυνάμεις) και τους νόμους που τα διέπουν (νόμος βαρύτητας).

---

## Newton's Lab στο Greenfoot (Slide 4)

*   Το Greenfoot παρέχει ένα έτοιμο project/σενάριο με όνομα **"Newton's Lab"** που μπορούμε να χρησιμοποιήσουμε ως βάση για να εξερευνήσουμε την προσομοίωση φυσικής.
*   **Δημιουργία Νέων Αντικειμένων (Slide 4):** Στο αρχικό σενάριο, μπορείτε να προσθέσετε νέα αντικείμενα (δημιουργώντας στιγμιότυπα των διαθέσιμων κλάσεων).
*   **Γιατί δεν βλέπουμε μια διαφορετική κλάση για κάθε αντικείμενο του Ηλιακού Συστήματος;** (Πλανήτης 1, Πλανήτης 2, κ.λπ.)
    *   Αυτό οφείλεται στην τεχνική της **Αφαίρεσης (Abstraction)** στον αντικειμενοστρεφή προγραμματισμό.

---

## Αφαίρεση και η κλάση Body (Slide 5)

*   **Διαφορές/Ομοιότητες:** Τα αντικείμενα του Ηλιακού Συστήματος (πλανήτες, Ήλιος κ.λπ.) διαφέρουν σε μέγεθος, μάζα, σύνθεση, ταχύτητα, αλλά έχουν και πολλές **ομοιότητες** (π.χ., όλα υπόκεινται στη βαρύτητα, όλα έχουν θέση, μάζα, ταχύτητα).
*   **Κλάση `Body`:** Αξιοποιώντας την αφαίρεση, μπορούμε να σχεδιάσουμε μια γενική κλάση, την `Body`, που διαχειρίζεται αυτά τα κοινά στοιχεία ορίζοντας τις κατάλληλες ιδιότητες (πεδία) και λειτουργίες (μεθόδους). Αυτό γίνεται και μέσω της **κληρονομικότητας**, όπου η κλάση `Body` κληρονομεί κοινές λειτουργίες από άλλες βοηθητικές κλάσεις.

---

## Εξερεύνηση του Newton's Lab Project στο Greenfoot

*   **Μέθοδοι Δημιουργίας Αντικειμένων στην κλάση Space (Slide 6):**
    *   Κάντε δεξί κλικ στον κόσμο (Space). Θα δείτε διάφορες μεθόδους (π.χ., `sunAndPlanet()`, `sunAndTwoPlanets()`, `sunPlanetMoon()`).
    *   Εκτελέστε κάθε μία από αυτές τις μεθόδους. Τι συμβαίνει; Κάθε μέθοδος δημιουργεί ένα διαφορετικό setup του Ηλιακού Συστήματος.

*   **Δημόσιες Μέθοδοι της κλάσης Body (Slide 7):**
    *   Κάντε δεξί κλικ σε κάποιο αντικείμενο τύπου `Body` (π.χ., έναν πλανήτη).
    *   Τι δημόσιες μεθόδους διαθέτει; Θα δείτε πολλές μεθόδους, κάποιες από τις οποίες κληρονομούνται από την κλάση `SmoothMover` (θα την δούμε σε λίγο).

*   **Επιθεώρηση Κατάστασης Αντικειμένου (Slide 8):**
    *   Κάντε δεξί κλικ σε κάποιο αντικείμενο `Body` (πλανήτη) και επιλέξτε `Inspect`.
    *   Θα δείτε τις ιδιότητες του αντικειμένου: `mass`, `Vector movement`, `exactX`, `exactY`, `x`, `y`, `rotation`, `World world`.
    *   **`mass`:** Τι είναι αυτή η ιδιότητα; Αναπαριστά τη μάζα του πλανήτη.
    *   **Οι υπόλοιπες ιδιότητες:** Τι αντιπροσωπεύουν και που δηλώνεται η κάθε μία;
        *   `exactX`, `exactY`: Οι **πραγματικές** συντεταγμένες του αντικειμένου σε **`double`** (κινητή υποδιαστολή).
        *   `x`, `y`: Οι στρογγυλοποιημένες συντεταγμένες σε **`int`** (ακέραιο), αυτές που χρησιμοποιούνται για την απεικόνιση στην οθόνη του Greenfoot.
        *   `rotation`: Η περιστροφή του αντικειμένου (κληρονομημένη από `Actor`).
        *   `World world`: Αναφορά στον κόσμο όπου ζει το αντικείμενο (κληρονομημένη από `Actor`).
        *   `Vector movement`: Ένα αντικείμενο τύπου `Vector` που αναπαριστά το **διάνυσμα κίνησης** (ταχύτητα και κατεύθυνση) του αντικειμένου.

*   **Μελέτη του Κώδικα - κλάση Space (Slides 9-10):**
    *   Ανοίξτε τον κώδικα της κλάσης `Space`. Θα δείτε τις μεθόδους `sunAndPlanet()`, `sunAndTwoPlanets()`, `sunPlanetMoon()` και την `removeAllObjects()`.
    *   Η μέθοδος `removeAllObjects()` απλώς αφαιρεί όλα τα αντικείμενα τύπου `Actor` από τον κόσμο.
    *   Οι άλλες μέθοδοι **δημιουργούν** αντικείμενα τύπου `Body` και τα προσθέτουν στον κόσμο (`addObject`).
    *   **Ορίσματα στην κλήση `addObject(new Body(...), x, y)`:**
        *   Το πρώτο όρισμα είναι το αντικείμενο που δημιουργείται (`new Body(...)`).
        *   Τα `x`, `y` είναι οι αρχικές ακέραιες συντεταγμένες στην οθόνη.
    *   **Ορίσματα στον κατασκευαστή της κλάσης `Body` (Slide 10 - βλ. `sunPlanetMoon()`):**
        *   `Body(50, 240.0, new Vector(270, 0.0), new Color(255, 216, 0))`: Αυτός είναι ο κατασκευαστής για τον Ήλιο.
            *   `50`: Το αρχικό μέγεθος στην οθόνη.
            *   `240.0`: Η **μάζα** του αντικειμένου (σε `double`).
            *   `new Vector(270, 0.0)`: Το αρχικό **διάνυσμα κίνησης**. Εδώ χρησιμοποιείται **πολική αναπαράσταση**: κατεύθυνση 270 μοίρες (προς τα κάτω) και μήκος/ταχύτητα 0.0.
            *   `new Color(255, 216, 0)`: Το χρώμα του αντικειμένου.
        *   `Body(20, 4.2, new Vector(90, 2.2), new Color(0, 124, 196))`: Κατασκευαστής για έναν πλανήτη.
            *   `20`: Μέγεθος.
            *   `4.2`: Μάζα.
            *   `new Vector(90, 2.2)`: Διάνυσμα κίνησης. Κατεύθυνση 90 μοίρες (προς τα δεξιά), ταχύτητα 2.2.
            *   `new Color(...)`: Χρώμα.
        *   `Body(5, 0.8, new Vector(90, 3.25), new Color(240, 220, 96))`: Κατασκευαστής για ένα φεγγάρι.
            *   `5`: Μέγεθος.
            *   `0.8`: Μάζα.
            *   `new Vector(90, 3.25)`: Διάνυσμα κίνησης. Κατεύθυνση 90 μοίρες, ταχύτητα 3.25.
            *   `new Color(...)`: Χρώμα.

---

## Υποστηρικτικές Κλάσεις (Slides 11-13)

*   Το Newton's Lab project χρησιμοποιεί δύο βασικές **υποστηρικτικές κλάσεις** (που μπορείτε να εισάγετε από την Greenfoot library):
    *   **`SmoothMover`:** Μια κλάση για την υλοποίηση **πιο ομαλής κίνησης** αντικειμένων (Slides 14-16).
    *   **`Vector`:** Μια κλάση για την αναπαράσταση και διαχείριση **διανυσμάτων κίνησης** (ταχύτητα και κατεύθυνση) (Slides 17-19).

*   **Άλλες Υποστηρικτικές Κλάσεις (Slides 12-13):**
    *   Στη library του Greenfoot υπάρχουν και άλλες χρήσιμες υποστηρικτικές κλάσεις που παρέχουν έτοιμη λειτουργικότητα, όπως η κλάση **`Animal`** που χρησιμοποιήσαμε στο προηγούμενο μάθημα.
    *   Επιπλέον, το Greenfoot παρέχει κλάσεις για **δυναμικές πληροφορίες μέσω web services**, π.χ., για να χρησιμοποιήσετε εικόνες από **GoogleMaps** ως σκηνικό ή να εμφανίσετε/ελέγξετε χαρακτήρες ανάλογα με την κατάσταση του **καιρού**! (Βλ. links: http://www.greenfoot.org/doc/dynamic, http://www.youtube.com/user/greenfootTeam).

*   **Η κλάση `SmoothMover` (Slides 14-16):**
    *   Παρέχει ομαλότερη κίνηση αποθηκεύοντας τις συντεταγμένες του χαρακτήρα ως **πραγματικούς αριθμούς (`double`)** αντί για ακέραιους (`int`).
    *   Η θέση σχεδίασης στην οθόνη (σε pixels) είναι πάντα ακέραια, οπότε οι `double` συντεταγμένες στρογγυλοποιούνται για την εμφάνιση.
    *   Εσωτερικά, όμως, η θέση διατηρείται με μεγαλύτερη ακρίβεια, οδηγώντας σε πιο ομαλή κίνηση, ειδικά όταν η ταχύτητα είναι μικρή (π.χ., αύξηση κατά 0.6 σε κάθε βήμα).
    *   Η κλάση `SmoothMover` μπορεί να γίνει `import` στο Greenfoot.
    *   Έχει εμπλουτιστεί ώστε να χρησιμοποιεί το **διάνυσμα κίνησης** (αντικείμενο `Vector`) για να υποδεικνύει την τρέχουσα κατεύθυνση και ταχύτητα.
    *   **Μέθοδοι της `SmoothMover` (Slide 15-16):**
        *   `move()`: Κινεί τον χαρακτήρα ανάλογα με την κατάσταση του διανύσματος κίνησης.
        *   `getExactX()`, `getExactY()`: Επιστρέφουν τις πραγματικές συντεταγμένες (`double`).
        *   `getMovement()`: Επιστρέφει το αντικείμενο `Vector` που αναπαριστά την τρέχουσα κίνηση.
        *   `getSpeed()`: Επιστρέφει την ταχύτητα (μήκος του διανύσματος).
        *   `accelerate(double factor)`: Επιταχύνει την ταχύτητα του κινούμενου αντικειμένου.
        *   `addForce(Vector force)`: Τροποποιεί την τρέχουσα κίνηση προσθέτοντας ένα νέο διάνυσμα (δύναμη).
        *   `setLocation(double x, double y)` / `setLocation(int x, int y)`: Ορίζουν τη θέση του αντικειμένου.

*   **Η κλάση `Vector` (Slides 17-19):**
    *   Υλοποιεί το διάνυσμα κίνησης. Δεν ανήκει στους `Actor`s, χρησιμοποιείται από αυτούς (π.χ., από την `SmoothMover`).
    *   Ένα διάνυσμα μπορεί να αναπαρασταθεί με δύο τρόπους:
        *   **Καρτεσιανή:** Ζεύγος αποστάσεων (`dx`, `dy`) από το τρέχον σημείο.
        *   **Πολική:** Κατεύθυνση (γωνία) και μήκος (ταχύτητα).
    *   Η κλάση `Vector` έχει υλοποιηθεί ώστε να υποστηρίζει και τις δύο αναπαραστάσεις, κάνοντας τις απαραίτητες μετατροπές αυτόματα εσωτερικά.
    *   **Κατασκευαστές της `Vector` (Slide 19):**
        *   `Vector()`: Ουδέτερο διάνυσμα (μήκος 0).
        *   `Vector(double dx, double dy)`: Δημιουργία με καρτεσιανές συντεταγμένες.
        *   `Vector(int direction, double length)`: Δημιουργία με πολικές συντεταγμένες.
    *   **Μέθοδοι της `Vector` (Slide 19):**
        *   `add(Vector other)`: Προσθέτει ένα άλλο διάνυσμα (διανυσματική πρόσθεση).
        *   `getDirection()`: Επιστρέφει την κατεύθυνση σε μοίρες.
        *   `getLength()`: Επιστρέφει το μήκος του διανύσματος (ταχύτητα).
        *   `getDx()`, `getDy()`: Επιστρέφουν τα καρτεσιανά στοιχεία.
        *   `revertHorizontal()`, `revertVertical()`: Αντιστρέφουν την οριζόντια/κάθετη συνιστώσα.
        *   `scale(double factor)`: Κλιμακώνει το διάνυσμα (αλλάζει το μήκος).
        *   `setDirection(int direction)`: Ορίζει την κατεύθυνση, αφήνοντας το μήκος αμετάβλητο.
        *   `setLength(double length)`: Ορίζει το μήκος, αφήνοντας την κατεύθυνση αμετάβλητη.
        *   `setNeutral()`: Ορίζει το διάνυσμα ως ουδέτερο (μήκος 0).

*   **Κλάση `Body` (Slide 20):**
    *   Η κλάση `Body` **κληρονομεί** από την κλάση **`SmoothMover`**.
    *   Δηλώνει πεδία όπως `mass` και `movement` (το `Vector`).
    *   Ο κατασκευαστής αρχικοποιεί αυτά τα πεδία.
    *   Η μέθοδος `act()` στην αρχική έκδοση του Newton's Lab **δεν περιέχει κώδικα**, γι' αυτό και οι πλανήτες μένουν ακίνητοι.

---

## Κλάση Body – Προσθήκη Κίνησης (Slide 21)

*   Για να αρχίσουν οι πλανήτες να κινούνται, πρέπει να καλέσουμε την κληρονομημένη μέθοδο `move()` μέσα στη μέθοδο `act()` της κλάσης `Body`.
    ```java
    public void act() {
        move();
    }
    ```
*   Προσθέστε πλανήτες καλώντας κάποια από τις 3 μεθόδους της κλάσης `Space` ή προσθέτοντας μεμονωμένα αντικείμενα `Body` και εκτελέστε την προσομοίωση.
*   **Πως συμπεριφέρονται οι πλανήτες;** Κινούνται σε ευθεία γραμμή με σταθερή ταχύτητα. Γιατί; Διότι η κίνηση (το διάνυσμα) καθορίζεται από την αρχική ταχύτητα και κατεύθυνση που ορίστηκε στον κατασκευαστή και στην παρούσα έκδοση αυτό το διάνυσμα **δεν ενημερώνεται** από τις δυνάμεις βαρύτητας.

---

## Κλάση Body – Δυνάμεις Βαρύτητας (Slides 22-30)

*   **Γιατί οι πλανήτες κινούνται σε ευθεία;** Διότι η κίνηση (ταχύτητα και κατεύθυνση) καθορίζεται από το διάνυσμα κίνησης, και στην παρούσα έκδοση αυτό δεν ενημερώνεται.
*   **Από τι επηρεάζεται η κίνηση των πλανητών;** Από τις **δυνάμεις βαρύτητας** που προκαλούνται από την βαρυτική έλξη όλων των υπόλοιπων πλανητών (και του Ήλιου) που υπάρχουν στο διάστημα.
*   **Ενημέρωση Κίνησης:** Πρέπει λοιπόν, σε κάθε βήμα της προσομοίωσης (πριν κινηθεί ο κάθε πλανήτης), να **υπολογίζονται** και να **εφαρμόζονται** οι δυνάμεις βαρύτητας από όλα τα άλλα αντικείμενα/πλανήτες που βρίσκονται τριγύρω.

*   **Υπολογισμός Δυνάμεων Βαρύτητας (Slides 23-29):**
    *   **Εφαρμογή Δυνάμεων από όλους τους πλανήτες:**
        *   Για κάθε αντικείμενο `Body` (πλανήτης) στον κόσμο:
            *   Εφάρμοσε τη βαρύτητα από αυτόν τον πλανήτη στο **τρέχον** αντικείμενο.
    *   **Νόμος της Παγκόσμιας Έλξης (Νεύτωνας) (Slide 26):** Κάθε υλικό σώμα ασκεί έλξη σε κάθε άλλο υλικό σώμα με δύναμη ανάλογη του γινομένου των μαζών τους (`m1 * m2`) και αντιστρόφως ανάλογη του τετραγώνου της μεταξύ τους απόστασης (`r^2`). Η δύναμη (`F`) δίνεται από τον τύπο: `F = G * (m1 * m2) / r^2`, όπου `G` είναι η σταθερά της βαρύτητας.
    *   **Υλοποίηση `applyForces()` (Slide 25):**
        *   Αυτή η μέθοδος θα προστεθεί στην κλάση `Body`.
        *   Θα ανακτά **όλα τα αντικείμενα τύπου `Body`** από τον κόσμο (`getWorld().getObjects(Body.class)`).
        *   Για **κάθε** αντικείμενο `body` σε αυτή τη λίστα (εξαιρώντας τον εαυτό του - `if (body != this)`), καλεί τη μέθοδο `applyGravity(body)`.
    *   **Υλοποίηση `applyGravity(Body other)` (Slides 27-29):**
        *   Αυτή η μέθοδος θα προστεθεί στην κλάση `Body`.
        *   **Βήματα:**
            *   Βρες τη θέση του **άλλου σώματος** (`other.getExactX()`, `other.getExactY()`) και τη θέση του **τρέχοντος σώματος** (`this.getExactX()`, `this.getExactY()`).
            *   Υπολόγισε την **απόσταση** (`distance`) μεταξύ των δύο σωμάτων. Χρησιμοποίησε το **Πυθαγόρειο Θεώρημα** (Slide 28) για να βρεις την απόσταση από τις καρτεσιανές διαφορές: `distance = Math.sqrt(dx*dx + dy*dy);`.
            *   Δημιούργησε ένα **νέο διάνυσμα (`force`)** που αναπαριστά τη δύναμη βαρύτητας. Η **κατεύθυνση** αυτού του διανύσματος είναι από το τρέχον αντικείμενο προς το άλλο αντικείμενο (οπότε τα `dx`, `dy` χρησιμοποιούνται για τη δημιουργία του `Vector force`). Η **ένταση** (`strength`) της δύναμης υπολογίζεται με τον **τύπο του Νεύτωνα**: `strength = GRAVITY * this.mass * other.mass / (distance * distance);`. (`GRAVITY` είναι μια σταθερά που δηλώνεται στην κλάση `Body`).
            *   Υπολόγισε την **επιτάχυνση** (`acceleration`) που προκαλεί αυτή η δύναμη στο τρέχον αντικείμενο. Η επιτάχυνση είναι η δύναμη διαιρούμενη με τη μάζα του **τρέχοντος** αντικειμένου: `acceleration = strength / this.mass;` (Slide 28).
            *   **Ενημέρωσε** το διάνυσμα κίνησης (`movement`) του τρέχοντος αντικειμένου. Αυτό γίνεται με την κληρονομημένη μέθοδο `addForce(force)` και, **ΣΗΜΑΝΤΙΚΟ**, με την κληρονομημένη μέθοδο `setLength(movement.getLength() + acceleration)`, ώστε να **ενημερωθεί το μήκος** (ταχύτητα) του διανύσματος κίνησης με την επιτάχυνση.
    *   **Ενημέρωση `act()` (Slide 25):** Τώρα η μέθοδος `act()` της κλάσης `Body` πρέπει να καλεί πρώτα την `applyForces()` (για να υπολογιστούν και εφαρμοστούν όλες οι δυνάμεις) και μετά την `move()` (για να κινηθεί το αντικείμενο με βάση το ενημερωμένο διάνυσμα κίνησης).
    ```java
    public void act() {
        applyForces();
        move();
    }
    ```

*   **Σταθερότητα Ηλιακού Συστήματος και Ανακρίβειες (Slide 30):**
    *   Εκτελέστε την προσομοίωση. Οι πλανήτες θα αρχίσουν να κινούνται σε τροχιές!
    *   Είναι το Ηλιακό σύστημα σταθερό; Πιθανότατα όχι για πολύ.
    *   **Πειραματιστείτε:** Κάντε αλλαγές στη σταθερά της βαρύτητας (`GRAVITY`), στις μάζες ή στις αρχικές κινήσεις. Παρατηρήστε πώς επηρεάζεται η σταθερότητα.
    *   **Ανακρίβειες:** Η προσομοίωσή μας έχει αρκετές ανακρίβειες, κυρίως επειδή υπολογίζουμε και εφαρμόζουμε τις δυνάμεις **σειριακά** (ένα αντικείμενο τη φορά) και κινείται αμέσως μετά. Σε μια πιο ακριβή προσομοίωση, θα έπρεπε πρώτα να υπολογιστούν **όλες** οι δυνάμεις που δρουν σε **όλα** τα αντικείμενα με βάση τις τρέχουσες θέσεις τους, και **μετά** να γίνουν **όλες** οι κινήσεις ταυτόχρονα.
    *   Όποιος ενδιαφέρεται, μπορεί να διαβάσει περισσότερα για τη σταθερότητα του Ηλιακού συστήματος στο link: http://en.wikipedia.org/wiki/Stability_of_the_Solar_System.

---

## Επέκταση (Challenge) (Slide 31)

*   Το Newton's Lab project παρέχει μια επέκταση (Newton's Lab 3) με επιπλέον στοιχεία:
    *   Μια νέα κλάση **`Obstacle`** (εμπόδιο - π.χ., μια γραμμή).
    *   Τροποποίηση της κλάσης `Body` ώστε να λαμβάνει υπόψη το **αυξημένη βαρύτητα (`Gravity`)** που ασκεί το εμπόδιο (προσθέτοντας τη δύναμη έλξης του εμποδίου).
    *   Σταθερά εμπόδια.
    *   Περισσότεροι πλανήτες.
    *   Ήχος.
*   Εξερευνήστε αυτό το project για να δείτε πώς ενσωματώθηκαν αυτά τα στοιχεία.
