# Δομές δεδομένων εργασίας και κόστος χρήσης αυτών

---

### ### 1. **Strings – Για counters και απλές αντιστοιχίσεις**
#### Χρήση:
- `total_users`, `total_urls`: Μετρητές του πλήθους χρηστών και URLs.
- `user:{username}:count`: Μετρητής URLs ανά χρήστη.
- `long_url:{long_url}`: Αντιστοίχιση long URL με το short code.

#### Επιλογή:
Η δομή String της Redis είναι η πιο απλή και αποδοτική για αριθμητικές τιμές και μοναδικές αντιστοιχίσεις.

#### Πολυπλοκότητα:
- `GET`, `SET`: **O(1)** – Σταθερός χρόνος ανάγνωσης και εγγραφής.
- `INCR`: **O(1)** – Ιδανικό για counters.

#### Συμπέρασμα:
Οι μετρητές και οι απλές key-value σχέσεις απαιτούν γρήγορη πρόσβαση, συνεπώς τα Strings αποτελούν την βέλτιστη λύση.

📌 **Εντολές Redis**: `GET`, `SET`, `INCR`, `EXISTS`

---

### 2. **Hashes – Για την αποθήκευση σύνθετων αντικειμένων (URL metadata)**
#### Χρήση:
- `url:{short_code}`: Hash που περιέχει `long_url`, `creator`, `clicks`.

#### Επιλογή:
Η Hash δομή επιτρέπει την οργάνωση συσχετιζόμενων πεδίων κάτω από ένα κοινό κλειδί. Είναι ιδανική για εγγραφές που λειτουργούν σαν αντικείμενα/δομές.

#### Πολυπλοκότητα:
- `HSET`, `HGET`: **O(1)** κατά μέσο όρο.
- `HGETALL`: **O(N)**, όπου N είναι ο αριθμός των πεδίων (μικρό στην περίπτωσή μας).
- `HINCRBY`: **O(1)** – Χρήσιμο για αύξηση του μετρητή clicks.

#### Συμπέρασμα:
Η επιλογή Hash για την αποθήκευση των short URLs επιτρέπει αποδοτική και οργανωμένη αποθήκευση δεδομένων, με πολύ χαμηλό κόστος ανάγνωσης/εγγραφής.

📌 **Εντολές Redis**: `HSET`, `HGET`, `HGETALL`, `HINCRBY`

---

### 3. **Sets – Για τη συσχέτιση χρηστών με τα short codes τους**
#### Χρήση:
- `user:{username}:urls`: Set με όλα τα short codes που ανήκουν στον χρήστη.

#### Επιλογή:
Η δομή Set εξασφαλίζει ότι δεν υπάρχουν διπλότυπα short codes και παρέχει εύκολη και αποδοτική ανάκτηση όλων των URLs ανά χρήστη.

#### Πολυπλοκότητα:
- `SADD`: **O(1)** – Προσθήκη στοιχείου.
- `SMEMBERS`: **O(N)** – Ανάκτηση όλων των στοιχείων.

#### Συμπέρασμα:
Το Set είναι η κατάλληλη δομή για την υλοποίηση της σχέσης "ένας χρήστης → πολλά short codes" με εγγύηση μοναδικότητας και γρήγορη ανάκτηση.

📌 **Εντολές Redis**: `SADD`, `SMEMBERS`

---

## Συνολική Εκτίμηση

Η επιλογή των παραπάνω δομών δεδομένων είναι βέλτιστη για τις ανάγκες της εφαρμογής:

- **Strings** παρέχουν σταθερό χρόνο για αριθμητικές τιμές και αντιστοιχίσεις.
- **Hashes** προσφέρουν αποδοτική ομαδοποίηση σχετικών πεδίων.
- **Sets** εξασφαλίζουν μοναδικότητα και εύκολη ανάκτηση.
- **Scan-based iteration** επιτρέπει ασφαλή και επεκτάσιμη αναζήτηση δεδομένων.

---

### ✅ Επισκόπηση

| Redis Key                    | Τύπος     | Περιγραφή |
|-----------------------------|-----------|-----------|
| `total_users`               | String    | Μετρητής χρηστών |
| `total_urls`                | String    | Μετρητής URLs |
| `user:{username}:count`     | String    | Αριθμός URLs χρήστη |
| `user:{username}:urls`      | Set       | Short codes χρήστη |
| `long_url:{long_url}`       | String    | Short code για το συγκεκριμένο long URL |
| `url:{short_code}`          | Hash      | Δεδομένα για ένα short URL |

---

