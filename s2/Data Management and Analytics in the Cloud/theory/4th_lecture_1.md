## 🗂️ **Key-Value Databases: Σημειώσεις**

### 🔑 Τι είναι και πώς λειτουργούν
- Αποτελούν την πιο απλή μορφή βάσης δεδομένων NoSQL.
- Βασίζονται σε ζεύγη **κλειδιού-τιμής** (key-value), όπως τα dictionaries της Python ή τα objects της JavaScript.
- Η διαχείριση και επιμονή (persistence) των δεδομένων γίνεται από τη βάση.
- Χρησιμοποιούν **δομή στη μνήμη RAM**, ενώ κρατούν τα δεδομένα και στον δίσκο.
- Διαθέτουν αλγόριθμους cache για να μειώσουν την προσπέλαση από τον δίσκο και να αυξήσουν την ταχύτητα.

---

### 📦 Χαρακτηριστικά Key-Value βάσεων

1. **CRUD**: Υποστήριξη για δημιουργία, ανάκτηση, ενημέρωση και διαγραφή με βάση το κλειδί.
2. **Υποστήριξη Τύπων Δεδομένων**: Π.χ., arrays, nested dictionaries. Καλύτερη βελτιστοποίηση αποθήκευσης και αναζήτησης.
3. **Ταξινομημένα Κλειδιά**: Επιτρέπει εύκολες αναζητήσεις βάσει αλφαβητικής/χρονικής/αριθμητικής σειράς.
4. **Δευτερεύοντα Κλειδιά (Indexes)**: Πολλαπλοί τρόποι πρόσβασης στα ίδια δεδομένα (π.χ. με όνομα, email ή τηλέφωνο).
5. **Αναπαραγωγή και Κατατμήσεις**:
   - Replication για ανοχή σε σφάλματα.
   - Partitioning (sharding) για διανομή δεδομένων σε πολλούς κόμβους.
6. **Υποστήριξη ACID (προαιρετικά)**: Μπορεί να ενεργοποιηθεί για απαιτητικά σενάρια, με μικρή απώλεια απόδοσης.

---

### ✅ Πλεονεκτήματα

1. **Κλιμάκωση (Scalability)**:
   - Βασικό πλεονέκτημα. Χρησιμοποιούνται σε μεγάλης κλίμακας εφαρμογές όπως Amazon, Google.
   - Υποστηρίζουν replication, sharding κ.ά.
2. **Αυξημένη Παραγωγικότητα Ανάπτυξης**:
   - Δεν απαιτούν σχήμα (schema-less).
   - Ευκολότερες τροποποιήσεις χωρίς migrations και downtime.
3. **Απόδοση (Performance)**:
   - Ταχύτητα ανάγνωσης/εγγραφής, ακόμη και με έναν μόνο κόμβο.
   - Ειδικά κατάλληλες για caching και αποθήκευση precomputed δεδομένων.

---

### ⚠️ Μειονεκτήματα

1. **Έλλειψη πλήρους ACID**:
   - Προσφέρεται μόνο προαιρετικά. Η απουσία μπορεί να οδηγήσει σε προβλήματα συνέπειας.
2. **Χάος στο Σχήμα**:
   - Η ευελιξία μπορεί να οδηγήσει σε κακοσχεδιασμένα μοντέλα δεδομένων χωρίς προγραμματισμό.
3. **Περιορισμένες Αναζητήσεις (Queries)**:
   - Δεν έχουν query language ή δυνατότητα σύνθετων ερωτημάτων.
   - Αναγκαστική υλοποίηση φίλτρων στην εφαρμογή.
4. **Αναποτελεσματικότητα σε αποθήκευση/αναζήτηση**:
   - Δεν υπάρχει συμπίεση ή βελτιστοποίηση όπως στις σχεσιακές βάσεις.

---

### 🔄 Περιπτώσεις Χρήσης

1. **Εφαρμογές ευαίσθητες σε απόδοση** (π.χ. Redis ως cache layer για homepage του Twitter).
2. **Storage Engine** για άλλες βάσεις: RocksDB, LevelDB χρησιμοποιούνται από MongoDB, MySQL κ.ά.
3. **Internet of Things (IoT)**:
   - Κατανεμημένη επεξεργασία κοντά στα άκρα (edge computing).

---

### 🧪 Παραδείγματα Βάσεων

- **Berkeley DB**: Πρωτοπόρα embedded βάση.
- **Dynamo (Amazon)**: Εσωτερική βάση για το Amazon Marketplace. Εισήγαγε έννοιες όπως Consistent Hashing, Tunable Consistency.
- **Redis**: In-memory βάση για caching. Εξαιρετικά γρήγορη αλλά ακριβή στη RAM.

---

### 🧭 Ιστορική Αναδρομή

- **2003-2006**: GFS, MapReduce, BigTable από Google.
- **2007**: Hadoop (Yahoo), Amazon Dynamo.
- **2008 και μετά**: Twitter, Facebook υιοθετούν NoSQL λύσεις.

---

### 🛠️ Τεχνικές Δομής και Συνέπειας (Amazon Dynamo)

- **Consistent Hashing**: Ομαλή προσθήκη/αφαίρεση κόμβων.
- **Tunable Consistency**:
  - N = Πλήθος αντιγράφων.
  - W = Πόσα απαιτούνται για να ολοκληρωθεί εγγραφή.
  - R = Πόσα χρειάζονται για ανάγνωση.
- **Data Versioning**:
  - **Last Write Wins** (LWW): Η πιο πρόσφατη εγγραφή κερδίζει, αλλά αυτό μπορεί να οδηγήσει σε απώλεια δεδομένων.   
  - **Vector Clocks**: Μια πιο πολύπλοκη μέθοδος που χρησιμοποιείται για την ανίχνευση συγκρούσεων χωρίς την ανάγκη συγχρονισμού ρολογιών μεταξύ κόμβων.  
  - **CRDTs**: Συγχωνεύσιμα δεδομένα χωρίς conflicts.

---

### 📊 Δευτερεύουσα Δεικτοδότηση (Secondary Indexing)

- **Global Indexes**:
  - Μπορεί να χρειάζονται πρόσβαση σε πολλούς κόμβους.
  - Κίνδυνος άνισης κατανομής φόρτου (skew).
- **Local Indexes**:
  - Κάθε κόμβος κρατά δικό του index και απαντά σε queries τοπικά.
