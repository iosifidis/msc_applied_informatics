# ğŸ“˜ MongoDB

### ğŸ”¹ Î¤Î¹ ÎµÎ¯Î½Î±Î¹ Î· MongoDB;
- MongoDB = "humongous" (Ï„ÎµÏÎ¬ÏƒÏ„Î¹Î¿Ï‚).
- Î•Î¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„Î¿Ï ÎºÏÎ´Î¹ÎºÎ±, Ï‡Ï‰ÏÎ¯Ï‚ ÏƒÏ‡Î®Î¼Î± (schema-free), ÎºÎ»Î¹Î¼Î±ÎºÎ¿ÏÎ¼ÎµÎ½Î·, Ï…ÏˆÎ·Î»Î®Ï‚ Î±Ï€ÏŒÎ´Î¿ÏƒÎ·Ï‚ **document-oriented Î²Î¬ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½**.
- Î‘Î½Î±Ï€Ï„ÏÏ‡Î¸Î·ÎºÎµ Ï„Î¿ 2007 Î±Ï€ÏŒ Ï„Î·Î½ **10gen** (ÏƒÎ®Î¼ÎµÏÎ± MongoDB Inc).
- Î“ÏÎ±Î¼Î¼Î­Î½Î· ÏƒÎµ **C++**, Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ APIs ÏƒÎµ Ï€Î¿Î»Î»Î­Ï‚ Î³Î»ÏÏƒÏƒÎµÏ‚.
- Î”ÎµÎ½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ SQL, Î±Î»Î»Î¬ Î²Î±ÏƒÎ¯Î¶ÎµÏ„Î±Î¹ ÏƒÎµ **Î­Î³Î³ÏÎ±Ï†Î± Ï„ÏÏ€Î¿Ï… JSON** (Î® Î±ÎºÏÎ¹Î²Î­ÏƒÏ„ÎµÏÎ±, **BSON** - Binary JSON).

---

### ğŸ”¹ Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î”Î¿Î¼Î®Ï‚
| ÎŒÏÎ¿Ï‚ MongoDB         | Î‘Î½Ï„Î¯ÏƒÏ„Î¿Î¹Ï‡Î¿ ÏƒÎµ Î£Ï‡ÎµÏƒÎ¹Î±ÎºÎ® Î’Î¬ÏƒÎ· Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ |
|----------------------|--------------------------------------|
| Database             | Î’Î¬ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½                       |
| Collection           | Î Î¯Î½Î±ÎºÎ±Ï‚                              |
| Document             | Î“ÏÎ±Î¼Î¼Î® (row)                         |
| Field                | Î£Ï„Î®Î»Î· (column)                       |
| Index                | Î•Ï…ÏÎµÏ„Î®ÏÎ¹Î¿ (index)                    |
| Cursor               | Î”ÎµÎ¯ÎºÏ„Î·Ï‚ ÏƒÏ„Î¿ Î±Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î± ÎµÎ½ÏŒÏ‚ ÎµÏÏ‰Ï„Î®Î¼Î±Ï„Î¿Ï‚|

ÎšÎ¬Î¸Îµ Î­Î³Î³ÏÎ±Ï†Î¿ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Î­Ï‡ÎµÎ¹ **Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ¬ Ï€ÎµÎ´Î¯Î±** Î±ÎºÏŒÎ¼Î± ÎºÎ±Î¹ Î¼Î­ÏƒÎ± ÏƒÏ„Î·Î½ Î¯Î´Î¹Î± collection.

---

### ğŸ”¹ Î Î»ÎµÎ¿Î½ÎµÎºÏ„Î®Î¼Î±Ï„Î± MongoDB
- Î•Ï…ÎºÎ¿Î»Î¯Î± ÏƒÏ„Î¹Ï‚ Î±Ï€Î»Î­Ï‚ ÎµÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚.
- ÎšÎ±Î»Î® Î³Î¹Î± ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ web.
- Î•ÏÎºÎ¿Î»Î· ÎºÎ±Î¹ Î³ÏÎ®Î³Î¿ÏÎ· ÎµÎ½Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½.
- ÎŒÏ‡Î¹ ÎºÎ±Î»Î® ÎµÏ€Î¹Î»Î¿Î³Î® Î³Î¹Î± Ï€Î¿Î»ÏÏ€Î»Î¿ÎºÎ± ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î± ÏƒÏ…Î½Î±Î»Î»Î±Î³ÏÎ½.

---

### ğŸ”¹ MongoDB Î”Î¿Î¼Î® Î•Î³Î³ÏÎ¬Ï†Î¿Ï… (Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±)
```json
{
  name: "John",
  age: 20,
  phone: "777",
  address: "J-street"
}
```

---

### ğŸ”¹ Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Î”ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ - CRUD

#### Create:
```js
db.collection.insertOne(document)
db.collection.insertMany([doc1, doc2, ...])
```

#### Read:
```js
db.collection.find({query}, {projection})
db.collection.findOne({query})
```

#### Update:
```js
db.collection.updateOne(query, update)
db.collection.updateMany(query, update)
```

#### Delete:
```js
db.collection.deleteOne(query)
db.collection.deleteMany(query)
db.collection.drop()
```

---

### ğŸ”¹ Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î± Î•ÏÏ‰Ï„Î®ÏƒÎµÏ‰Î½ (Querying)

1. ÎŒÎ»Î¿Î¹ Î¿Î¹ Î¼Î¿Î½ÏŒÎºÎµÏÎ¿Î¹ (unicorns) Î¼Îµ Î²Î¬ÏÎ¿Ï‚ > 700 ÎºÎ±Î¹ Ï†ÏÎ»Î¿ "Î±ÏÏƒÎµÎ½Î¹ÎºÏŒ":
```js
db.unicorns.find({gender: "m", weight: {$gt: 700}})
```

2. ÎœÎ¿Î½ÏŒÎºÎµÏÎ¿Î¹ Ï‡Ï‰ÏÎ¯Ï‚ Ï€ÎµÎ´Î¯Î¿ vampires:
```js
db.unicorns.find({vampires: {$exists: false}})
```

3. Î Î¿Î¹Î¿Î¹ Î±Î³Î±Ï€Î¿ÏÎ½ "apple" Î® "orange":
```js
db.unicorns.find({loves: {$in: ["apple", "orange"]}})
```

4. Î“Ï…Î½Î±Î¯ÎºÎµÏ‚ Î¼Î¿Î½ÏŒÎºÎµÏÎ¿Î¹ Ï€Î¿Ï… Î±Î³Î±Ï€Î¿ÏÎ½ "apple" Î® Î¶Ï…Î³Î¯Î¶Î¿Ï…Î½ < 500:
```js
db.unicorns.find({gender: "f", $or: [{loves: "apple"}, {weight: {$lt: 500}}]})
```

5. ÎœÏŒÎ½Î¿ Ï„Î± Î¿Î½ÏŒÎ¼Î±Ï„Î± ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î¼Î¿Î½ÏŒÎºÎµÏÏ‰Î½:
```js
db.unicorns.find({}, {name: 1, _id: 0})
```

6. Î¤Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· ÎºÎ±Ï„Î¬ Î²Î¬ÏÎ¿Ï‚:
```js
db.unicorns.find().sort({weight: 1})
```

7. Î¤Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· ÎºÎ±Ï„Î¬ ÏŒÎ½Î¿Î¼Î± ÎºÎ±Î¹ Î¼ÎµÏ„Î¬ ÎºÎ±Ï„Î¬ vampires:
```js
db.unicorns.find().sort({name: 1, vampires: 1})
```

8. Î”ÎµÏÏ„ÎµÏÎ¿Ï‚ ÎºÎ±Î¹ Ï„ÏÎ¯Ï„Î¿Ï‚ Î²Î±ÏÏÏ„ÎµÏÎ¿Ï‚ Î¼Î¿Î½ÏŒÎºÎµÏÎ¿Ï‚:
```js
db.unicorns.find().sort({weight: -1}).skip(1).limit(2)
```

9. Î Î»Î®Î¸Î¿Ï‚ Î¼Î¿Î½ÏŒÎºÎµÏÏ‰Î½ Î¼Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿Ï…Ï‚ Î±Ï€ÏŒ 50 vampires:
```js
db.unicorns.find({vampires: {$gt: 50}}).countDocuments()
```

---

### ğŸ”¹ Î•Î½Î·Î¼ÎµÏÏÏƒÎµÎ¹Ï‚ (Update)

- Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï€ÎµÎ´Î¯Î¿Ï…:
```js
db.unicorns.updateOne({name: "Aurora"}, {$set: {weight: 500}})
```

- Î‘ÏÎ¾Î·ÏƒÎ·/ÎœÎµÎ¯Ï‰ÏƒÎ· Ï„Î¹Î¼Î®Ï‚:
```js
db.unicorns.updateOne({name: "Pilot"}, {$inc: {vampires: -2}})
```

- Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î½Î­Î±Ï‚ Ï„Î¹Î¼Î®Ï‚ ÏƒÎµ Ï€Î¯Î½Î±ÎºÎ±:
```js
db.unicorns.updateOne({name: "Aurora"}, {$push: {loves: "sugar"}})
```

- Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏŒÎ»Ï‰Î½ (Ï€.Ï‡. Î¼Î±ÏÎºÎ¬ÏÎ¹ÏƒÎ¼Î± Ï‰Ï‚ ÎµÎ¼Î²Î¿Î»Î¹Î±ÏƒÎ¼Î­Î½Î¿Î¹):
```js
db.unicorns.updateMany({}, {$set: {vaccinated: true}})
```

---

### ğŸ”¹ Aggregation (ÎŸÎ¼Î±Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ· - Î Î±ÏÏŒÎ¼Î¿Î¹Î¿ Î¼Îµ SQL `GROUP BY`)

#### Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±:
```js
db.sales.aggregate([
  { $group: { _id: "$item", total: { $sum: { $multiply: ["$price", "$quantity"] } } }},
  { $match: { total: { $gte: 100 } }}
])
```

#### Î‘ÏƒÎºÎ®ÏƒÎµÎ¹Ï‚:
1. Î ÏŒÏƒÎ¿Î¹ Î¼Î¿Î½ÏŒÎºÎµÏÎ¿Î¹ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Î½Î¬ Ï†ÏÎ»Î¿;
2. ÎœÎ­ÏƒÎ¿Ï‚ ÏŒÏÎ¿Ï‚ vampires Î³Î¹Î± Î¼Î¿Î½ÏŒÎºÎµÏÎ¿Ï…Ï‚ < 600 ÎºÎ¹Î»Î¬, Î±Î½Î¬ Ï†ÏÎ»Î¿.
3. Î Î¿Î¹Î± Ï„ÏÎ¿Ï†Î® Î±Î³Î±Ï€Î¹Î­Ï„Î±Î¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿ ÎºÎ±Î¹ Î±Ï€ÏŒ Ï€Î¿Î¹Î¿Ï…Ï‚;

---

### ğŸ”¹ MongoDB Shell Î•Î½Ï„Î¿Î»Î­Ï‚
```bash
show dbs
use mydb
show collections
```

---

### ğŸ”¹ Î ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î¿Î¯ MongoDB
- **Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡ÎµÎ¹ referential integrity**.
- Î— Î±Ï€Î¿-ÎºÎ±Î½Î¿Î½Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· (denormalization) Î´Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯ ÎºÏŒÏƒÏ„Î· ÏƒÏ„Î·Î½ ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·.
- Î”ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ ÏƒÏ‡Î®Î¼Î±, Î±Î»Î»Î¬:
  - Î•Î½Î´Î­Ï‡ÎµÏ„Î±Î¹ Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î±ÏƒÏ…Î½Î­Ï€ÎµÎ¹ÎµÏ‚.
  - Î Î¿Î»Î»Î­Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î­Ï‚ Ï‡ÏÎµÎ¹Î¬Î¶Î¿Î½Ï„Î±Î¹ Î¿Î¼Î¿Î¹Î¿Î¼Î¿ÏÏ†Î¯Î± Î´Î¿Î¼Î®Ï‚.

---

## ğŸ“š Î Î·Î³Î­Ï‚ Î³Î¹Î± ÎœÎµÎ»Î­Ï„Î·
- [MongoDB Manual](https://docs.mongodb.com/manual/)
- [The Little MongoDB Book](http://openmymind.net/mongodb.pdf)
- https://www.w3resource.com/mongodb/nosql.php
- https://highlyscalable.wordpress.com


