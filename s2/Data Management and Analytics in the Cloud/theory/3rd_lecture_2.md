# **Αναπαραγωγή, Κατακερματισμός και Ομαδοποίηση σε Συστήματα Βάσεων Δεδομένων**

## **1. Κατακερματισμός (Partitioning)**
Ο κατακερματισμός είναι η λογική διαίρεση ενός πίνακα σε μικρότερα μέρη, με στόχο τη βελτιστοποίηση της απόδοσης και της διαχείρισης των δεδομένων.

### **Τύποι Κατακερματισμού**
1. **RANGE** (Κατακερματισμός κατά εύρος τιμών)
   - Διαχωρίζει τα δεδομένα βάσει εύρους τιμών μιας στήλης.
   - Παράδειγμα:
     ```sql
     CREATE TABLE Employee (
        emp_id INT AUTO_INCREMENT,
        fname VARCHAR(50),
        lname VARCHAR(50),
        store_id TINYINT,
        PRIMARY KEY  (emp_id)
     ) ENGINE=MyISAM
     PARTITION BY RANGE (emp_id) (
        PARTITION p0 VALUES LESS THAN (10000),
        PARTITION p1 VALUES LESS THAN (20000),
        PARTITION p2 VALUES LESS THAN (30000),
        PARTITION p3 VALUES LESS THAN (40000),
        PARTITION p4 VALUES LESS THAN MAXVALUE
     );
     ```

2. **LIST** (Κατακερματισμός κατά λίστα τιμών)
   - Οι εγγραφές κατανέμονται σε κατατμήσεις (partitions) βάσει προκαθορισμένων τιμών.
   - Παράδειγμα:
     ```sql
     CREATE TABLE Employee (
        emp_id INT,
        fname VARCHAR(50),
        lname VARCHAR(50),
        store_id TINYINT
     ) ENGINE=MyISAM
     PARTITION BY LIST (store_id) (
        PARTITION pNorth VALUES IN (2,8,12),
        PARTITION pEast VALUES IN (1,4,7),
        PARTITION pWest VALUES IN (3,5,6,10),
        PARTITION pSouth VALUES IN (9,11)
     );
     ```

3. **HASH** (Κατακερματισμός με χρήση κατακερματιστικής συνάρτησης)
   - Τα δεδομένα κατανέμονται με τη χρήση συνάρτησης κατακερματισμού (hash).
   - Παράδειγμα:
     ```sql
     CREATE TABLE Employee (
        emp_id INT AUTO_INCREMENT,
        fname VARCHAR(50),
        lname VARCHAR(50),
        store_id TINYINT,
        PRIMARY KEY  (emp_id)
     ) ENGINE=MyISAM
     PARTITION BY HASH (emp_id) PARTITIONS 4;
     ```
   - Αν `emp_id=9`, τότε:
     ```
     mod(9,4) = 1
     ```
     Οπότε, η εγγραφή αποθηκεύεται στο partition `p1`.

4. **KEY** (Κατακερματισμός με χρήση κλειδιών)
   - Παρόμοιο με τον HASH, αλλά δεν απαιτεί αριθμητική στήλη.
   - Παράδειγμα:
     ```sql
     CREATE TABLE Employee (
        emp_id INT,
        fname VARCHAR(50),
        lname VARCHAR(50),
        store_id TINYINT
     ) ENGINE=MyISAM
     PARTITION BY KEY (lname) PARTITIONS 4;
     ```

### **Οφέλη του Κατακερματισμού**
- **Ταχύτερες εισαγωγές και αναζητήσεις**.
- **Γρήγορη διαγραφή ιστορικών δεδομένων** μέσω **DROP PARTITION**.
- **Βελτίωση επιδόσεων για μεγάλες βάσεις δεδομένων**.

---

## **2. Αναπαραγωγή (Replication)**
Η αναπαραγωγή επιτρέπει τη δημιουργία αντιγράφων των δεδομένων σε πολλαπλούς διακομιστές για:
- Υψηλή διαθεσιμότητα.
- Ισορροπημένη κατανομή φορτίου.
- Αντίγραφα ασφαλείας (backups).

### **Τύποι Αναπαραγωγής**
1. **Συγχρονισμένη Αναπαραγωγή (Synchronous Replication)**
   - Η συναλλαγή δεσμεύεται (commit) **μόνο όταν** τα δεδομένα έχουν αναπαραχθεί πλήρως.
   - **Πλεονεκτήματα**: Ασφάλεια, υψηλή συνοχή δεδομένων.
   - **Μειονεκτήματα**: Καθυστερήσεις στην εκτέλεση.
   - Χρησιμοποιείται κυρίως σε **MySQL Cluster**.

2. **Ασύγχρονη Αναπαραγωγή (Asynchronous Replication)**
   - Η συναλλαγή δεσμεύεται **πριν** αναπαραχθούν τα δεδομένα.
   - **Πλεονεκτήματα**: Ταχύτερη εκτέλεση.
   - **Μειονεκτήματα**: Κίνδυνος απώλειας δεδομένων αν αποτύχει ο κύριος διακομιστής (master).

### **Τοπολογίες Αναπαραγωγής**
1. **Master-Slave** (Ένας κύριος με πολλούς υποτελείς)
   - Ο master αποθηκεύει όλες τις αλλαγές σε ένα **binary log**.
   - Οι slaves λαμβάνουν τα δεδομένα από το log.
   
2. **Master-Master** (Δύο κύριοι διακομιστές)
   - Και οι δύο διακομιστές ενημερώνονται ταυτόχρονα.
   - Ιδανικό για **υψηλή διαθεσιμότητα**.

3. **Master-Slave με Relay Server** (Ενδιάμεσος διακομιστής)
   - Ο master επικοινωνεί **μόνο με έναν slave**, ο οποίος αναλαμβάνει να ενημερώσει τους υπόλοιπους.

---

## **3. Ομαδοποίηση (Clustering)**
Η ομαδοποίηση είναι η κατανομή των δεδομένων σε πολλαπλούς κόμβους με σκοπό:
- Την αύξηση της απόδοσης.
- Την αποφυγή σημείων αποτυχίας (single points of failure).

### **MySQL Cluster**
- Χρησιμοποιεί **NDB (Network DataBase) Storage Engine**.
- Επιτρέπει **οριζόντια κλιμάκωση**.
- Διατηρεί αντίγραφα δεδομένων σε **πολλαπλά nodes**.

---

## **4. Εφαρμογές & Παραδείγματα**
| Περίπτωση Χρήσης            | Κατάλληλη Τεχνολογία |
|-----------------------------|---------------------|
| Αναλύσεις μεγάλου όγκου δεδομένων | **Κατακερματισμός (Partitioning)** |
| Ταχύτερη ανάκτηση δεδομένων | **Κατακερματισμός + Αναπαραγωγή** |
| Αποφυγή απώλειας δεδομένων | **Συγχρονισμένη Αναπαραγωγή** |
| Ισορροπία φόρτου εργασίας | **Ασύγχρονη Αναπαραγωγή** |
| Υψηλή διαθεσιμότητα | **Clustering (Ομαδοποίηση)** |

---

## **5. Συμπεράσματα**
- Ο **Κατακερματισμός (Partitioning)** βελτιστοποιεί την απόδοση μεγάλων πινάκων.
- Η **Αναπαραγωγή (Replication)** διασφαλίζει την ανθεκτικότητα των δεδομένων.
- Η **Ομαδοποίηση (Clustering)** είναι απαραίτητη για εξαιρετικά μεγάλες εφαρμογές.

