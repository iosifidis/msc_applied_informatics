## Σημειώσεις για τις Βάσεις Δεδομένων Key-Value

**1. Ορισμός και Βασικές Αρχές**

*   **Ο Απλούστερος Τύπος NoSQL:** Οι βάσεις δεδομένων κλειδιού-τιμής (KV) θεωρούνται η πιο θεμελιώδης μορφή NoSQL βάσης δεδομένων.
*   **Δομή Αποθήκευσης:** Κάθε στοιχείο (item) στη βάση δεδομένων αποθηκεύεται ως ένα **ζεύγος** που αποτελείται από:
    *   Ένα όνομα χαρακτηριστικού (attribute name) ή πιο απλά, ένα **κλειδί (key)**.
    *   Μια **τιμή (value)** που αντιστοιχεί σε αυτό το κλειδί.
    *   *Παράδειγμα:* `Key 1 -> Value 1`, `Key 2 -> Value 2`
*   **Συλλογή Ζευγών:** Τα δεδομένα συνολικά αποθηκεύονται ως μια συλλογή από τέτοια ζεύγη κλειδιού/τιμής.
*   **Μοναδικότητα Κλειδιού:** Το **κλειδί (key)** σε κάθε ζεύγος **πρέπει να είναι μοναδικό** μέσα στη βάση δεδομένων (ή σε έναν συγκεκριμένο χώρο ονομάτων/namespace, ανάλογα με την υλοποίηση). Δεν μπορούν να υπάρχουν δύο εγγραφές με το ίδιο ακριβώς κλειδί.
*   **Τύποι Τιμών (Values):** Οι τιμές μπορούν να είναι απλοί τύποι δεδομένων (π.χ., ακέραιοι, συμβολοσειρές) ή πιο σύνθετοι τύποι, όπως σύνολα (sets) δεδομένων, λίστες, ή ακόμα και άλλες δομές key-value (ένθετα αντικείμενα).
*   **Ανάκτηση Δεδομένων:** Η ανάκτηση δεδομένων γίνεται **αποκλειστικά μέσω του κλειδιού (key)**, απαιτώντας την ακριβή αντιστοίχιση (exact match) του κλειδιού που ψάχνουμε.
*   **Ευελιξία:** Νέοι τύποι δεδομένων μπορούν εύκολα να προστεθούν στη βάση δεδομένων απλώς εισάγοντας νέα ζεύγη κλειδιού-τιμής, χωρίς να απαιτείται αλλαγή σε προκαθορισμένο σχήμα.

**2. Βασικές Λειτουργίες (Operations)**

*   Οι τρεις θεμελιώδεις λειτουργίες που εκτελούνται σε μια βάση δεδομένων κλειδιού-τιμής είναι:
    1.  **`put(key, value)`:** Εισάγει ένα νέο ζεύγος κλειδιού-τιμής ή ενημερώνει την τιμή για ένα υπάρχον κλειδί.
    2.  **`get(key)`:** Ανακτά την τιμή (value) που αντιστοιχεί στο δοθέν κλειδί (key).
    3.  **`delete(key)`:** Διαγράφει το ζεύγος κλειδιού-τιμής που αντιστοιχεί στο δοθέν κλειδί (key).

**3. Παραδείγματα Συστημάτων Διαχείρισης KV Βάσεων**

*   Μερικά γνωστά συστήματα βάσεων δεδομένων κλειδιού-τιμής περιλαμβάνουν:
    *   **Redis**
    *   **Riak**
    *   **Oracle NoSQL Database**
    *   (Άλλα που αναφέρθηκαν σε προηγούμενες διαφάνειες: Memcached, DynamoDB, Berkeley DB, RocksDB, LevelDB κ.ά.)

**4. Σχήμα Βάσης Δεδομένων Κλειδιού-Τιμής (Key-Value Database Schema)**

*   Παρόλο που οι KV βάσεις είναι schema-less όσον αφορά την *επιβολή* ενός σχήματος από τη βάση, συχνά ακολουθούμε μια **σύμβαση (convention)** για τη δομή των κλειδιών ώστε να αναπαραστήσουμε πιο σύνθετες δομές, όπως αυτές που βρίσκουμε σε σχεσιακές βάσεις.
*   **Παράδειγμα: Αντιστοίχιση Σχεσιακού Πίνακα (Relation) σε KV Schema**
    *   Έστω ο σχεσιακός πίνακας `STUDENT` με στήλες `SID` (Primary Key), `SFName`, `SPhone`.
    *   **Σύμβαση για το Κλειδί:** Μια κοινή προσέγγιση είναι η δημιουργία ενός σύνθετου κλειδιού με τη μορφή:
        `table_name : primary_key_value : attribute_name`
    *   **Αντιστοίχιση:**
        *   Για την εγγραφή `(SID: 16s143, SFName: Ahmed, SPhone: 95214785)`:
            *   `Student:16s143:SFName = "Ahmed"` (key = `Student:16s143:SFName`, value = `"Ahmed"`)
            *   `Student:16s143:SPhone = "95214785"` (key = `Student:16s143:SPhone`, value = `"95214785"`)
        *   Για την εγγραφή `(SID: 16j7890, SFName: Wafa, SPhone: 99663145)`:
            *   `Student:16j7890:SFName = "Wafa"`
            *   `Student:16j7890:SPhone = "99663145"`
    *   **Παρατήρηση:** Κάθε χαρακτηριστικό (στήλη) της αρχικής σχεσιακής γραμμής γίνεται ένα ξεχωριστό key-value ζεύγος στη KV βάση. Το πρωτεύον κλειδί της γραμμής ενσωματώνεται στο κλειδί της KV εγγραφής.

**5. Άσκηση: Μετατροπή Πίνακα EMPLOYEE**

*   **Ζητούμενο:** Μετατρέψτε τον παρακάτω πίνακα `EMPLOYEE` σε σχήμα Key-Value χρησιμοποιώντας την παραπάνω σύμβαση.
    *   Πίνακας EMPLOYEE: (EmpID, EmpName, EmpAddress, EmpBdate)
        *   100 | Laika Al-Mamari | Al Batinah, Sohar | 1/21/1980
        *   101 | Khalid Al-Ameri | Al Aqur, Shinas   | 2/3/1990
        *   102 | Ranya Al-Balushi| Al Mutaqa, Sohar  | 5/25/1985
*   **Λύση:**
    *   `Employee:100:EmpName = "Laika Al-Mamari"`
    *   `Employee:100:EmpAddress = "Al Batinah, Sohar"`
    *   `Employee:100:EmpBdate = "1/21/1980"`
    *   `Employee:101:EmpName = "Khalid Al-Ameri"`
    *   `Employee:101:EmpAddress = "Al Aqur, Shinas"`
    *   `Employee:101:EmpBdate = "2/3/1990"`
    *   `Employee:102:EmpName = "Ranya Al-Balushi"`
    *   `Employee:102:EmpAddress = "Al Mutaqa, Sohar"`
    *   `Employee:102:EmpBdate = "5/25/1985"`

