# Centralized DBMS review

#### **🔹 Γιατί να χρησιμοποιήσουμε ένα DBMS;**  
- **Ανεξαρτησία δεδομένων & αποδοτική πρόσβαση**  
- **Μειωμένος χρόνος ανάπτυξης εφαρμογών**  
- **Ακεραιότητα & ασφάλεια δεδομένων**  
- **Ομοιόμορφη διαχείριση δεδομένων**  
- **Υποστήριξη ταυτόχρονων προσβάσεων & αποκατάσταση από καταρρεύσεις**  

---

#### **🔹 Δομή ενός DBMS**  
- **Αρχιτεκτονική πολλαπλών επιπέδων**  
- **Στρώματα λειτουργίας:**  
  - **Διαχείριση χώρου στον δίσκο**  
  - **Διαχείριση buffer**  
  - **Μέθοδοι πρόσβασης & αρχεία**  
  - **Σχέσεις & τελεστές ερωτημάτων**  
  - **Βελτιστοποίηση & εκτέλεση ερωτημάτων**  
- **Σημαντικές παράμετροι:** ταυτόχρονος έλεγχος & ανάκτηση δεδομένων  

---

#### **🔹 Αποθήκευση & Ευρετηρίαση Δεδομένων**  
- **Τύποι αρχείων αποθήκευσης:**  
  - **Heap Files (Αρχεία σωρού)** → Αποθήκευση εγγραφών χωρίς συγκεκριμένη σειρά.  
  - **Sorted Files (Ταξινομημένα αρχεία)** → Αποθήκευση εγγραφών με βάση ένα κλειδί.  
  - **B+ Trees & Hash Indexes** → Βελτίωση της απόδοσης αναζήτησης δεδομένων.  
- **Εγγραφές μεταβλητού μήκους** → Αποδοτική αποθήκευση null τιμών.  

---

#### **🔹 Διαχείριση Ενδιάμεσης Μνήμης (Buffer Management)**  
- **Τα δεδομένα πρέπει να είναι στη RAM για να χρησιμοποιηθούν από το DBMS**  
- **Στρατηγικές αντικατάστασης σελίδων:**  
  - **LRU (Least Recently Used)**  
  - **MRU (Most Recently Used)**  
- **Διαχείριση καταλόγων σελίδων για heap files**  

---

#### **🔹 Συναλλαγές & Ιδιότητες ACID**  
- **Atomicity (Ατομικότητα)**: Μια συναλλαγή εκτελείται πλήρως ή καθόλου.  
- **Consistency (Συνέπεια)**: Οι συναλλαγές μεταφέρουν τη βάση από μια έγκυρη κατάσταση σε μια άλλη.  
- **Isolation (Απομόνωση)**: Κάθε συναλλαγή εκτελείται ανεξάρτητα από τις υπόλοιπες.  
- **Durability (Μονιμότητα)**: Αν μια συναλλαγή ολοκληρωθεί, οι αλλαγές της είναι μόνιμες.  

---

#### **🔹 Εξωτερική Ταξινόμηση & Σύζευξη Δεδομένων**  
- **Εξωτερική Ταξινόμηση (External Sorting)**  
  - Χρήση **συγχώνευσης (Merge Sort)** για μεγάλα δεδομένα.  
  - Χρησιμοποιεί **ενδιάμεση μνήμη (buffer frames)** για καλύτερη απόδοση.  
- **Μέθοδοι Σύζευξης (Joins):**  
  1. **Nested Loop Join** – Μη αποδοτικό για μεγάλα δεδομένα.  
  2. **Sort-Merge Join** – Αποδοτικό όταν οι πίνακες είναι ταξινομημένοι.  
  3. **Hash Join** – Χωρίζει τα δεδομένα σε κατακερματισμένα μέρη.  

---

#### **🔹 Ταυτόχρονος Έλεγχος (Concurrency Control)**  
- **Συγκρουσιακή Σειριοποιησιμότητα (Conflict Serializability)**  
  - Ένα πρόγραμμα είναι σειριοποιήσιμο αν το αποτέλεσμά του ισοδυναμεί με κάποιο σειριακό πρόγραμμα.  
  - Χρήση **Γραφήματος Προτεραιότητας (Precedence Graph)** για ανίχνευση κυκλικών εξαρτήσεων.  
- **Πρωτόκολλο Κλειδώματος Δύο Φάσεων (2PL – Two-Phase Locking)**  
  - **Φάση απόκτησης κλειδαριών:** Μια συναλλαγή μπορεί να αποκτήσει νέες κλειδαριές αλλά όχι να απελευθερώσει.  
  - **Φάση απελευθέρωσης κλειδαριών:** Όταν αρχίσει να απελευθερώνει κλειδαριές, δεν μπορεί να αποκτήσει νέες.  
  - **Σκοπός:** Εξασφάλιση σειριοποιήσιμης εκτέλεσης συναλλαγών.  

---

#### **🔹 Επαναφορά από Κατάρρευση & Ανάκτηση Δεδομένων**  
- **Πρωτόκολλο Write-Ahead Logging (WAL)**  
  - Το **ιστορικό συναλλαγών (log)** αποθηκεύει αλλαγές πριν γραφούν στη βάση.  
  - Εγγυάται **Atomicity (A) και Durability (D)**.  
- **Τύποι Εγγραφών Ιστορικού:**  
  - **Update (Τροποποίηση)**  
  - **Commit (Ολοκλήρωση συναλλαγής)**  
  - **Abort (Ακύρωση συναλλαγής)**  
  - **Compensation Log Records (CLR)** – Για επαναφορά από σφάλματα.  
- **Διαδικασία Ανάκτησης:**  
  1. **Ανάλυση (Analysis Phase)** – Εντοπισμός συναλλαγών που δεν ολοκληρώθηκαν.  
  2. **Redo Phase** – Εφαρμογή όλων των αλλαγών των ολοκληρωμένων συναλλαγών.  
  3. **Undo Phase** – Ανάκληση των μη ολοκληρωμένων συναλλαγών.  

---

#### **🔹 Συμπέρασμα**  
✅ Τα RDBMS παρέχουν **δομημένη και ασφαλή αποθήκευση δεδομένων**.  
✅ Χρησιμοποιούν **ACID συναλλαγές** για ακεραιότητα και συνέπεια.  
✅ Υποστηρίζουν **διαφορετικές τεχνικές ευρετηρίασης & αποθήκευσης**.  
✅ Παρέχουν **μηχανισμούς επαναφοράς από καταρρεύσεις**.  
❌ **Όχι πάντα αποδοτικά για Big Data & NoSQL εφαρμογές**.  

---
