# 📊 **Redis Data Types - Cheat Sheet**

---

## **1. Redis Strings (Συμβολοσειρές)**

*   **Εισαγωγή:**
    *   Ο πιο βασικός τύπος δεδομένων στο Redis.
    *   Αποθηκεύουν ακολουθίες από bytes, οι οποίες μπορεί να είναι κείμενο, σειριοποιημένα αντικείμενα (serialized objects), ή δυαδικοί πίνακες (binary arrays).
*   **Χρήσεις:**
    *   Συχνά χρησιμοποιούνται για **caching**.
    *   Υποστηρίζουν λειτουργίες για υλοποίηση **μετρητών (counters)**.
    *   Επιτρέπουν **bitwise operations** (λειτουργίες σε επίπεδο bit).
*   **Παραδείγματα:**
    *   Αποθήκευση/Ανάκτηση: `SET user:1 salvatore`, `GET user:1` -> `"salvatore"`
    *   Αποθήκευση με Χρόνο Λήξης: `SET ticket:27 "..." EX 100` (λήγει σε 100 δευτερόλεπτα)
    *   Μετρητές: `INCR views:page:2` -> `1`, `INCRBY views:page:2 10` -> `11`
*   **Όρια:** Ένα μεμονωμένο Redis string μπορεί να έχει μέγιστο μέγεθος 512 MB.
*   **Βασικές Εντολές:**
    *   `SET key value [EX seconds | PX milliseconds | NX | XX ...]`: Αποθηκεύει μια τιμή string. (Επιλογές: EX/PX για λήξη, NX=set if not exist, XX=set if exist).
    *   `SETNX key value`: Αποθηκεύει τιμή μόνο αν το κλειδί *δεν* υπάρχει ήδη. Χρήσιμο για υλοποίηση κλειδωμάτων (locks).
    *   `GET key`: Ανακτά την τιμή string ενός κλειδιού.
    *   `MGET key [key ...]`: Ανακτά τις τιμές πολλών κλειδιών ταυτόχρονα.
    *   `INCR key`: Αυξάνει ατομικά (atomically) έναν ακέραιο μετρητή κατά 1.
    *   `DECR key`: Μειώνει ατομικά έναν ακέραιο μετρητή κατά 1.
    *   `INCRBY key increment`: Αυξάνει ατομικά έναν ακέραιο μετρητή κατά `increment` (μπορεί να είναι αρνητικός για μείωση).
    *   `INCRBYFLOAT key increment`: Αυξάνει έναν μετρητή κινητής υποδιαστολής (floating point).
*   **Απόδοση:**
    *   Οι περισσότερες βασικές λειτουργίες (SET, GET, INCR, DECR) είναι **O(1)** (πολύ αποδοτικές).
    *   **Προσοχή:** Εντολές που λειτουργούν σε τμήματα του string (π.χ., `SUBSTR`, `GETRANGE`, `SETRANGE`) μπορεί να είναι **O(n)**, όπου n το μήκος του τμήματος ή του string, και μπορεί να προκαλέσουν προβλήματα απόδοσης με πολύ μεγάλα strings.

---

## **2. Redis Lists (Λίστες)**

*   **Εισαγωγή:**
    *   Υλοποιούνται ως **συνδεδεμένες λίστες (linked lists)** από τιμές string.
    *   Διατηρούν τη σειρά εισαγωγής των στοιχείων.
*   **Χρήσεις:**
    *   Υλοποίηση **στοιβών (stacks)** (LIFO - Last In, First Out).
    *   Υλοποίηση **ουρών (queues)** (FIFO - First In, First Out).
    *   Διαχείριση ουρών για συστήματα επεξεργασίας στο παρασκήνιο (background worker systems).
*   **Παραδείγματα:**
    *   Ουρά (FIFO): `LPUSH` για εισαγωγή, `RPOP` για εξαγωγή.
    *   Στοίβα (LIFO): `LPUSH` για εισαγωγή, `LPOP` για εξαγωγή.
    *   Μήκος λίστας: `LLEN work:queue:ids`.
    *   Ατομική μετακίνηση: `LMOVE source destination LEFT LEFT` (μετακινεί από αρχή σε αρχή).
    *   Περιορισμένη Λίστα (Capped List): Χρήση `LTRIM` μετά από κάθε `LPUSH` για να διατηρείται η λίστα σε συγκεκριμένο μέγεθος (π.χ., μόνο τα τελευταία 100 στοιχεία).
*   **Όρια:** Μέγιστο μήκος λίστας: 2^32 - 1 στοιχεία (~4 δισεκατομμύρια).
*   **Βασικές Εντολές:**
    *   `LPUSH key element [element ...]`: Προσθέτει στοιχείο(α) στην αρχή (head) της λίστας.
    *   `RPUSH key element [element ...]`: Προσθέτει στοιχείο(α) στο τέλος (tail) της λίστας.
    *   `LPOP key [count]`: Αφαιρεί και επιστρέφει στοιχείο(α) από την αρχή της λίστας.
    *   `RPOP key [count]`: Αφαιρεί και επιστρέφει στοιχείο(α) από το τέλος της λίστας.
    *   `LLEN key`: Επιστρέφει το μήκος της λίστας.
    *   `LMOVE source destination <LEFT | RIGHT> <LEFT | RIGHT>`: Ατομική μετακίνηση στοιχείου από τη λίστα `source` στη λίστα `destination` (καθορίζοντας από/προς ποιο άκρο).
    *   `LTRIM key start stop`: "Κόβει" τη λίστα ώστε να περιέχει μόνο τα στοιχεία εντός του καθορισμένου εύρους δεικτών (indices).
    *   `LRANGE key start stop`: Επιστρέφει στοιχεία της λίστας εντός ενός εύρους.
*   **Απόδοση:**
    *   Λειτουργίες στα άκρα (head/tail) όπως `LPUSH`, `RPUSH`, `LPOP`, `RPOP` είναι **O(1)** (πολύ αποδοτικές).
    *   Λειτουργίες που απαιτούν προσπέλαση στοιχείων *μέσα* στη λίστα βάσει δείκτη, ή εισαγωγή/διαγραφή ενδιάμεσα, είναι συνήθως **O(n)**, όπου n ο αριθμός των στοιχείων που πρέπει να διασχιστούν. Παραδείγματα: `LINDEX` (get element by index), `LINSERT` (insert before/after element), `LSET` (set element by index). **Προσοχή** με αυτές τις εντολές σε μεγάλες λίστες.

---

## **3. Redis Sets (Σύνολα)**

*   **Εισαγωγή:**
    *   Μια **μη ταξινομημένη (unordered)** συλλογή από **μοναδικές (unique)** τιμές string (members).
*   **Χρήσεις:**
    *   Παρακολούθηση μοναδικών στοιχείων (π.χ., μοναδικές διευθύνσεις IP που επισκέφθηκαν μια σελίδα).
    *   Αναπαράσταση σχέσεων (π.χ., το σύνολο χρηστών με έναν συγκεκριμένο ρόλο).
    *   Εκτέλεση κλασικών **λειτουργιών συνόλων**: τομή (intersection), ένωση (union), διαφορά (difference).
*   **Παραδείγματα:**
    *   Προσθήκη: `SADD user:123:favorites 347`.
    *   Έλεγχος Μέλους: `SISMEMBER user:123:favorites 742` -> `1` (true).
    *   Τομή: `SINTER user:123:favorites user:456:favorites` -> `"561"`.
    *   Μέγεθος (Πληθικότητα): `SCARD user:123:favorites` -> `3`.
*   **Όρια:** Μέγιστο μέγεθος συνόλου: 2^32 - 1 μέλη.
*   **Βασικές Εντολές:**
    *   `SADD key member [member ...]`: Προσθέτει μέλος(η) στο σύνολο.
    *   `SREM key member [member ...]`: Αφαιρεί μέλος(η) από το σύνολο.
    *   `SISMEMBER key member`: Ελέγχει αν ένα string είναι μέλος του συνόλου.
    *   `SINTER key [key ...]`: Επιστρέφει την τομή (κοινά μέλη) δύο ή περισσότερων συνόλων.
    *   `SUNION key [key ...]`: Επιστρέφει την ένωση όλων των μελών.
    *   `SDIFF key [key ...]`: Επιστρέφει τη διαφορά (μέλη του πρώτου συνόλου που δεν υπάρχουν στα επόμενα).
    *   `SCARD key`: Επιστρέφει τον αριθμό των μελών (cardinality).
    *   `SMEMBERS key`: Επιστρέφει *όλα* τα μέλη του συνόλου.
*   **Απόδοση:**
    *   Οι περισσότερες λειτουργίες (προσθήκη, αφαίρεση, έλεγχος μέλους, μέγεθος) είναι **O(1)** (πολύ αποδοτικές, ανεξάρτητα από το μέγεθος του συνόλου).
    *   Οι λειτουργίες συνόλων (SINTER, SUNION, SDIFF) έχουν πολυπλοκότητα που εξαρτάται από το μέγεθος των συνόλων που επεξεργάζονται.
    *   **Προσοχή:** Η εντολή `SMEMBERS` είναι **O(n)**, όπου n ο αριθμός των μελών, και επιστρέφει όλα τα μέλη μαζικά. Για πολύ μεγάλα σύνολα, προτιμήστε την **`SSCAN`** που επιτρέπει την επανάληψη (iterative retrieval) πάνω στα μέλη χωρίς να μπλοκάρει τον server.

---

## **4. Redis Hashes (Κατακερματισμοί)**

*   **Εισαγωγή:**
    *   Αντιστοιχούν σε δομές τύπου "record" ή "object".
    *   Είναι συλλογές από ζεύγη **πεδίο-τιμή (field-value pairs)**.
*   **Χρήσεις:**
    *   Αναπαράσταση βασικών αντικειμένων (π.χ., προφίλ χρήστη).
    *   Αποθήκευση ομαδοποιημένων μετρητών ή σχετικών ρυθμίσεων.
*   **Παραδείγματα:**
    *   Προφίλ Χρήστη: `HSET user:123 username martina firstName Martina ...`, `HGET user:123 username` -> `"martina"`, `HGETALL user:123` -> (επιστρέφει όλα τα field-value pairs).
    *   Ομαδοποιημένοι Μετρητές: `HINCRBY device:777:stats pings 1`, `HINCRBY device:777:stats errors 1`.
*   **Όρια:** Κάθε hash μπορεί να αποθηκεύσει έως 2^32 - 1 ζεύγη πεδίου-τιμής. Πρακτικά, περιορίζεται από τη διαθέσιμη μνήμη.
*   **Βασικές Εντολές:**
    *   `HSET key field value [field value ...]`: Ορίζει την τιμή ενός ή περισσότερων πεδίων σε ένα hash.
    *   `HGET key field`: Επιστρέφει την τιμή ενός συγκεκριμένου πεδίου.
    *   `HMGET key field [field ...]`: Επιστρέφει τις τιμές πολλαπλών πεδίων.
    *   `HGETALL key`: Επιστρέφει όλα τα ζεύγη πεδίου-τιμής στο hash.
    *   `HINCRBY key field increment`: Αυξάνει ατομικά την ακέραια τιμή ενός πεδίου κατά `increment`.
    *   `HINCRBYFLOAT key field increment`: Αυξάνει την τιμή κινητής υποδιαστολής ενός πεδίου.
    *   `HKEYS key`: Επιστρέφει όλα τα ονόματα των πεδίων.
    *   `HVALS key`: Επιστρέφει όλες τις τιμές των πεδίων.
    *   `HLEN key`: Επιστρέφει τον αριθμό των πεδίων.
*   **Απόδοση:**
    *   Οι περισσότερες εντολές (HSET, HGET, HMGET, HINCRBY, HLEN) είναι **O(1)**.
    *   **Προσοχή:** Εντολές που επιστρέφουν όλα τα πεδία ή όλες τις τιμές (`HKEYS`, `HVALS`, `HGETALL`) είναι **O(n)**, όπου n ο αριθμός των πεδίων στο hash. Για μεγάλα hashes, προτιμήστε την **`HSCAN`** για επανάληψη.

---

## **5. Redis Sorted Sets (Ταξινομημένα Σύνολα)**

*   **Εισαγωγή:**
    *   Συλλογή από **μοναδικά (unique)** strings (members).
    *   Κάθε μέλος συνδέεται με μια **βαθμολογία (score)** (αριθμός floating point).
    *   Τα μέλη διατηρούνται **ταξινομημένα** βάσει της βαθμολογίας τους (score).
    *   Αν δύο μέλη έχουν την ίδια βαθμολογία, ταξινομούνται **λεξικογραφικά (lexicographically)**.
*   **Χρήσεις:**
    *   **Leaderboards (Πίνακες Κατάταξης):** Εύκολη διατήρηση ταξινομημένων λιστών με τις υψηλότερες (ή χαμηλότερες) βαθμολογίες (π.χ., σε παιχνίδια).
    *   **Rate Limiters:** Υλοποίηση μηχανισμών περιορισμού ρυθμού (π.χ., sliding-window rate limiter για έλεγχο κλήσεων API).
*   **Παραδείγματα:**
    *   Προσθήκη/Ενημέρωση Βαθμολογίας: `ZADD leaderboard:455 100 user:1`, `ZADD leaderboard:455 275 user:2` (ενημερώνει τη βαθμολογία του user:2).
    *   Ανάκτηση Εύρους (π.χ., top 3): `ZRANGE leaderboard:455 0 2 REV WITHSCORES` (REV=reverse order, WITHSCORES=επιστρέφει και τις βαθμολογίες).
    *   Εύρεση Κατάταξης (Rank): `ZREVRANK leaderboard:455 user:2` (επιστρέφει την κατάταξη [0-based] σε φθίνουσα σειρά).
*   **Όρια:** Όπως τα Sets, 2^32 - 1 μέλη.
*   **Βασικές Εντολές:**
    *   `ZADD key [NX|XX] [GT|LT] [CH] [INCR] score member [score member ...]`: Προσθέτει ή ενημερώνει μέλη με τις βαθμολογίες τους.
    *   `ZRANGE key start stop [BYSCORE | BYLEX] [REV] [LIMIT offset count] [WITHSCORES]`: Επιστρέφει μέλη εντός ενός εύρους δεικτών (rank). (Επιλογές: BYSCORE/BYLEX για εύρος βάσει score/λεξικογραφικά, REV για αντίστροφη σειρά, LIMIT για pagination, WITHSCORES για επιστροφή scores).
    *   `ZRANK key member`: Επιστρέφει την κατάταξη (rank, 0-based) ενός μέλους σε αύξουσα σειρά.
    *   `ZREVRANK key member`: Επιστρέφει την κατάταξη σε φθίνουσα σειρά.
    *   `ZCARD key`: Επιστρέφει τον αριθμό των μελών.
    *   `ZSCORE key member`: Επιστρέφει τη βαθμολογία ενός μέλους.
    *   `ZREM key member [member ...]`: Αφαιρεί μέλη.
*   **Απόδοση:**
    *   Οι περισσότερες βασικές λειτουργίες (προσθήκη, αφαίρεση, εύρεση score/rank) είναι **O(log n)**, όπου n ο αριθμός των μελών (λόγω της υποκείμενης δομής δεδομένων, συνήθως skip list ή hash table + skip list).
    *   **Προσοχή:** Εντολές που επιστρέφουν εύρος στοιχείων (`ZRANGE`, `ZREVRANGE` κ.λπ.) έχουν πολυπλοκότητα **O(log n + m)**, όπου m ο αριθμός των στοιχείων που επιστρέφονται. Η επιστροφή πολύ μεγάλου αριθμού στοιχείων (μεγάλο m) μπορεί να επηρεάσει την απόδοση. Για επανάληψη πάνω σε όλα τα στοιχεία, υπάρχει η **`ZSCAN`**.

---

✍️ **Σημείωση:** Το Redis είναι **εξαιρετικά γρήγορο** λόγω της αποθήκευσης δεδομένων στη μνήμη. Χρησιμοποιήστε τις **κατάλληλες δομές** ανάλογα με την περίπτωση για **απόδοση** και **αποδοτικότητα**.
