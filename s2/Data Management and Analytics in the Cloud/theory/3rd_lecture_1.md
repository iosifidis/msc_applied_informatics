# **Κατανεμημένες Βάσεις Δεδομένων (Distributed Databases)**  

## **1. Εισαγωγή**
- Δεδομένα αποθηκεύονται σε πολλά σημεία, κάθε ένα με το δικό του DBMS.
- **Κατανεμημένη Ανεξαρτησία Δεδομένων**: Οι χρήστες δεν χρειάζεται να γνωρίζουν πού βρίσκονται τα δεδομένα.
- **Κατανεμημένη Ατομικότητα Συναλλαγών**: Οι συναλλαγές πρέπει να εκτελούνται σε πολλά σημεία σαν να ήταν τοπικές.

### **Τάσεις & Προκλήσεις**
- Πολλές σύγχρονες κατανεμημένες βάσεις δεδομένων δεν υποστηρίζουν πλήρως αυτές τις ιδιότητες λόγω κόστους και πολυπλοκότητας.
- Για παγκόσμια κατανεμημένα δεδομένα, η διατήρηση της διαφάνειας τοποθεσίας δεν είναι πάντα επιθυμητή.

---

## **2. Τύποι Κατανεμημένων Βάσεων Δεδομένων**
- **Ομοιογενείς (Homogeneous)**: Όλα τα σημεία χρησιμοποιούν το ίδιο DBMS.
- **Ετερογενείς (Heterogeneous)**: Τα σημεία χρησιμοποιούν διαφορετικά DBMS.

---

## **3. Αρχιτεκτονικές Κατανεμημένων DBMS**
- **Client-Server**: Οι πελάτες στέλνουν ερωτήματα και ο διακομιστής τα επεξεργάζεται.
- **Collaborating-Server**: Οι διακομιστές συνεργάζονται για την εκτέλεση ερωτημάτων.

---

## **4. Αποθήκευση Δεδομένων**
- **Κατακερματισμός (Fragmentation)**:
  - **Οριζόντιος (Horizontal)**: Διάσπαση εγγραφών (π.χ., διαφορετικές περιοχές). Κάνω ενέργεια union.
  - **Κάθετος (Vertical)**: Διαχωρισμός στηλών (κάθε ζεύγος, έχει και την στήλη με το κλειδί) (π.χ., προσωπικά δεδομένα σε διαφορετικό σημείο). Κάνω ενέργεια join.
- **Αντιγραφή (Replication)**:
  - **Αύξηση διαθεσιμότητας** και **ταχύτερη εκτέλεση ερωτημάτων**.
  - **Συγχρονισμένη (Synchronous)** vs **Ασύγχρονη (Asynchronous)** (ΟΧΙ σε τραπεζικές συναλλαγές).

---

## **5. Διαχείριση Καταλόγων**
- Πρέπει να παρακολουθείται η τοποθεσία των δεδομένων.
- Ονομασία: Κάθε αντίγραφο δεδομένων πρέπει να έχει μοναδικό αναγνωριστικό.
- **Τοπικός Κατάλογος (Site Catalog)**: Κρατά πληροφορίες για δεδομένα και αντίγραφα σε κάθε σημείο.

---

## **6. Επεξεργασία Κατανεμημένων Ερωτημάτων**
- **Οριζόντιος κατακερματισμός**: Π.χ., αξιολογήσεις <5 αποθηκεύονται σε μία πόλη, >=5 σε άλλη.
- **Κάθετος κατακερματισμός**: Π.χ., το όνομα σε ένα σημείο, η ηλικία σε άλλο.
- **Αντιγραμμένα δεδομένα**: Επιλογή βάσει κόστους αποστολής.

## **ΟΧΙ ΑΠΟ ΕΔΩ ΚΑΙ ΚΑΤΩ**

### **Κατανεμημένα Joins**
- **Semijoin**: Μειώνει το κόστος μεταφοράς δεδομένων με μεταφορά μόνο σχετικών εγγραφών.
- **Bloom Join**: Χρησιμοποιεί bit-vector για μείωση του μεγέθους των δεδομένων.

---

## **7. Βελτιστοποίηση Κατανεμημένων Ερωτημάτων**
- **Βασισμένη στο κόστος**: Υπολογίζει όλες τις πιθανές λύσεις και επιλέγει την πιο αποδοτική.
- Οι διαφορές από τις κεντρικές βελτιστοποιήσεις είναι:
  1. **Επικοινωνιακό κόστος**.
  2. **Σεβασμός στην τοπική αυτονομία**.
  3. **Νέες μέθοδοι κατανεμημένου join**.

---

## **8. Ενημέρωση Κατανεμημένων Δεδομένων**
- **Συγχρονισμένη Αντιγραφή**:
  - Πριν ολοκληρωθεί μια συναλλαγή, όλα τα αντίγραφα πρέπει να ενημερωθούν.
  - **Read-any Write-all**: Ταχύτερη ανάγνωση, πιο αργή εγγραφή.
- **Ασύγχρονη Αντιγραφή**:
  - Τα αντίγραφα ενημερώνονται περιοδικά.
  - **Primary Site**: Ένα σημείο είναι το κύριο αντίγραφο.
  - **Peer-to-Peer**: Πολλά κύρια αντίγραφα με μηχανισμούς επίλυσης συγκρούσεων.

---

## **9. Ασφάλεια και Συγχρονισμός**
### **Μηχανισμοί Κλειδώματος**
- **Κεντρικοποιημένο (Centralized)**: Ένα σημείο διαχειρίζεται όλα τα κλειδώματα.
- **Πρωτεύον Αντίγραφο (Primary Copy)**: Κάθε αντικείμενο έχει ένα κύριο σημείο κλειδώματος.
- **Πλήρως Κατανεμημένο (Fully Distributed)**: Κάθε αντίγραφο κλειδώνεται τοπικά.

### **Ανίχνευση Κατανεμημένου Αδιεξόδου**
- **Κάθε σημείο διατηρεί έναν τοπικό γράφο εξαρτήσεων**.
- **Κεντρική, ιεραρχική ή προσέγγιση με χρονικό όριο** για ανίχνευση αδιεξόδων.

---

## **10. Ανάκτηση από Σφάλματα**
- **Διαφορετικά είδη αποτυχιών**: Σφάλματα σε κόμβους, αποτυχία συνδέσεων.
- **Σημασία του Commit Protocol**: Όλες οι υπο-συναλλαγές είτε ολοκληρώνονται είτε αποτυγχάνουν μαζί.

### **Διαδικασία Two-Phase Commit (2PC)**
1. **Φάση Προετοιμασίας (Prepare Phase)**:
   - Ο συντονιστής ζητά από κάθε κόμβο να αποφασίσει αν μπορεί να δεσμευτεί.
2. **Φάση Δέσμευσης (Commit Phase)**:
   - Αν όλοι απαντήσουν "Ναι", γίνεται commit.
   - Αν κάποιος απαντήσει "Όχι", γίνεται abort.

**Βελτιωμένη Εκδοχή: 2PC με Presumed Abort**
- Μειώνει τα μηνύματα αποφεύγοντας την αποστολή επιβεβαιώσεων για αποτυχίες.

---

## **11. Ανακεφαλαίωση**
- **Οι κατανεμημένες βάσεις δεδομένων απαιτούν νέες τεχνικές διαχείρισης συναλλαγών, αποθήκευσης και συγχρονισμού.**
- **Η απόφαση μεταξύ συγχρονισμένης και ασύγχρονης αντιγραφής εξαρτάται από τις ανάγκες συνοχής και απόδοσης.**
- **Η Two-Phase Commit εξασφαλίζει αξιόπιστη ανάκτηση, αλλά εισάγει καθυστερήσεις λόγω επικοινωνιακού κόστους.**

---
