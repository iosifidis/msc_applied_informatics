## *Εισαγωγή στις Χωρικές Βάσεις Δεδομένων**

Οι παρούσες σημειώσεις βασίζονται στο υλικό που παρουσιάστηκε για τις Χωρικές Βάσεις Δεδομένων και αντλούν έμπνευση από το workshop "Introduction to PostGIS". Για περαιτέρω εμβάθυνση, συνιστάται να εξερευνήσετε το αρχικό υλικό στο: https://postgis.net/workshops/postgis-intro/

---

#### **1. Τι είναι μία Χωρική Βάση Δεδομένων;**

Μια **Χωρική Βάση Δεδομένων (Spatial Database)** είναι ένα σύστημα βάσεων δεδομένων σχεδιασμένο να αποθηκεύει και να διαχειρίζεται **χωρικά αντικείμενα**, δηλαδή δεδομένα που αναφέρονται σε τοποθεσίες στον πραγματικό κόσμο. Σε αντίθεση με τις κλασικές βάσεις δεδομένων, οι χωρικές βάσεις προσφέρουν:

*   **Χωρικούς τύπους δεδομένων:** Ειδικούς τύπους για την αναπαράσταση γεωμετριών, όπως σημεία (point), γραμμές (line), και πολυγώνων (polygon).
*   **Πολυδιάστατη χωρική ευρετηριοποίηση:** Μηχανισμούς (όπως τα R-trees) για την αποτελεσματική αναζήτηση και ανάκτηση χωρικών δεδομένων, δεδομένου ότι τα χωρικά δεδομένα είναι συχνά πολυδιάστατα και μπορεί να επικαλύπτονται.
*   **Χωρικές συναρτήσεις σε SQL:** Επέκταση της γλώσσας SQL με ειδικές συναρτήσεις για την εκτέλεση χωρικών ερωτημάτων (π.χ., υπολογισμός απόστασης, εύρεση επικαλύψεων).

#### **2. Εξέλιξη Αρχιτεκτονικών GIS**

Η διαχείριση των χωρικών δεδομένων έχει εξελιχθεί σε τρεις βασικές γενιές αρχιτεκτονικών:

*   **Πρώτη Γενιά GIS:**
    *   **Αρχιτεκτονική:** Τα εργαλεία GIS (GIS Tools) επικοινωνούσαν με μία μηχανή δεδομένων GIS (GIS Data Engine) μέσω ιδιοταγούς (Proprietary) API.
    *   **Αποθήκευση Δεδομένων:** Η γεωμετρία, τα ευρετήρια και τα χαρακτηριστικά (attributes) αποθηκεύονταν σε **σύστημα αρχείων (file system)**.
    *   **Πρόβλημα:** Δύσκολη διαχείριση, έλλειψη διαλειτουργικότητας, μη βέλτιστη απόδοση για μεγάλα σύνολα δεδομένων, δεδομένου ότι οι βάσεις δεδομένων δεν υποστήριζαν ακόμα χωρικά δεδομένα.

*   **Δεύτερη Γενιά GIS:**
    *   **Αρχιτεκτονική:** Παρόμοια αρχιτεκτονική με την πρώτη γενιά, αλλά με σημαντική διαφορά στην αποθήκευση χαρακτηριστικών.
    *   **Αποθήκευση Δεδομένων:**
        *   Η γεωμετρία και τα ευρετήρια εξακολουθούσαν να αποθηκεύονται σε **σύστημα αρχείων** (ή ως BLOBS σε RDBMS).
        *   Τα **χαρακτηριστικά** (attributes) αποθηκεύονταν πλέον σε **Σχεσιακές Βάσεις Δεδομένων (RDBMS)** χρησιμοποιώντας SQL.
    *   **Βελτίωση:** Καλύτερη διαχείριση και queryability των χαρακτηριστικών, αλλά η γεωμετρία παρέμενε σε ένα λιγότερο ενσωματωμένο περιβάλλον.

*   **Τρίτη Γενιά GIS (Σύγχρονη προσέγγιση):**
    *   **Αρχιτεκτονική:** Τα εργαλεία GIS (GIS Tools) επικοινωνούν απευθείας με μία **Χωρική Σχεσιακή Βάση Δεδομένων (Spatial RDBMS)** μέσω SQL.
    *   **Αποθήκευση Δεδομένων:** Η γεωμετρία αποθηκεύεται ως **Αφηρημένοι Τύποι Δεδομένων (ADTs - Abstract Data Types)** μέσα σε RDBMS πίνακες, μαζί με τα σχετικά επιχειρηματικά δεδομένα.
    *   **Πλεονεκτήματα:** Πλήρης ενσωμάτωση, αξιοποίηση όλων των δυνατοτήτων των RDBMS (συναλλαγές, ασφάλεια, ανάκτηση, ευρετηρίαση), υψηλότερη απόδοση και καλύτερη διαλειτουργικότητα.

#### **3. Χωρικοί Τύποι Δεδομένων**

Οι γεωμετρίες αναπαριστώνται ιεραρχικά και περιλαμβάνουν τους εξής βασικούς τύπους:

*   **Geometry:** Η βασική κλάση από την οποία κληρονομούν όλοι οι χωρικοί τύποι.
*   **Point:** Ένα απλό σημείο σε έναν χώρο (π.χ., ένα δέντρο, μια διεύθυνση).
*   **Curve:** Ένας γενικός τύπος για γραμμικές γεωμετρίες.
    *   **LineString:** Μια ακολουθία σημείων που σχηματίζουν μια ευθεία ή πολυγωνική γραμμή (π.χ., ένας δρόμος, ένα ποτάμι).
*   **Surface:** Ένας γενικός τύπος για επιφάνειες.
    *   **Polygon:** Ένα κλειστό πολυγωνικό σχήμα που ορίζει μια περιοχή (π.χ., μια λίμνη, ένα κτίριο, μια χώρα).
*   **Geometry Collection:** Μια συλλογή οποιουδήποτε αριθμού γεωμετριών.
    *   **MultiPoint:** Μια συλλογή από σημεία.
    *   **MultiLineString:** Μια συλλογή από LineStrings.
    *   **MultiPolygon:** Μια συλλογή από Polygons.

**Σημαντική Σημείωση:** Το **Spatial Reference System (Σύστημα Χωρικής Αναφοράς)** είναι κρίσιμο, καθώς ορίζει πώς οι συντεταγμένες των γεωμετριών σχετίζονται με την πραγματική επιφάνεια της Γης (π.χ., γεωγραφικές συντεταγμένες WGS84, προβολικές συντεταγμένες).

#### **4. Χωρικά Ευρετήρια & Minimum Bounding Rectangle (MBR)**

*   **Κλασικά Ευρετήρια (B+trees):** Για κλασικά δεδομένα (αριθμοί, αλφαριθμητικά, ημερομηνίες), η ευρετηρίαση γίνεται με B+trees, που είναι βέλτιστα για μονοδιάστατες αναζητήσεις (εύρος, ίσος).
*   **Πρόκληση Χωρικών Δεδομένων:** Τα χωρικά δεδομένα είναι **πολυδιάστατα** (π.χ., Χ, Ψ, Ζ συντεταγμένες) και συχνά **επικαλύπτονται** ή **περιέχονται** το ένα στο άλλο, καθιστώντας τα B+trees ανεπαρκή.
*   **Χωρικά Ευρετήρια (R-trees):** Χρειαζόμαστε ειδικά χωρικά ευρετήρια, όπως τα R-trees, τα οποία είναι δομημένα για να χειρίζονται αποτελεσματικά πολυδιάστατα δεδομένα και χωρικές σχέσεις.
*   **Minimum Bounding Rectangle (MBR) ή Bounding Box (BBox):**
    *   Είναι το **μικρότερο ορθογώνιο, παράλληλο στους άξονες συντεταγμένων**, που περικλείει ένα χωρικό αντικείμενο.
    *   **Σημαντική Σημείωση:** Το MBR χρησιμοποιείται ως ένα **γρήγορο, πρώτο φιλτράρισμα** στις χωρικές αναζητήσεις. Παρέχει **κατά προσέγγιση αποτελέσματα**, καθώς δύο MBR μπορεί να επικαλύπτονται ενώ οι πραγματικές γεωμετρίες όχι. Ωστόσο, η επεξεργασία του είναι **πολύ ταχύτερη** από την ακριβή σύγκριση των πλήρων γεωμετριών. Αυτή η ταχύτητα είναι κρίσιμη για την απόδοση σε μεγάλες βάσεις δεδομένων.

#### **5. Βασικές Χωρικές Συναρτήσεις**

Οι χωρικές βάσεις δεδομένων παρέχουν ειδικές συναρτήσεις για τον χειρισμό των χωρικών αντικειμένων, οι οποίες ορίζονται από το πρότυπο **OGC SFSQL (Open Geospatial Consortium Simple Features for SQL)**. Οι λειτουργίες αυτές ομαδοποιούνται σε πέντε βασικές κατηγορίες:

1.  **Conversion (Μετατροπή):** Για τη μετατροπή δεδομένων μεταξύ γεωμετριών και εξωτερικών μορφών (π.χ., WKT, WKB, GeoJSON).
2.  **Management (Διαχείριση):** Για τη διαχείριση πληροφοριών που σχετίζονται με χωρικούς πίνακες και γεωμετρίες (π.χ., αλλαγή CRS, προσθήκη/αφαίρεση χωρικών στηλών).
3.  **Retrieval (Ανάκτηση):** Για την ανάκτηση ιδιοτήτων των γεωμετριών ή τη μέτρηση μεγεθών τους (π.χ., μήκος γραμμής, εμβαδόν πολυγώνου, συντεταγμένες σημείων).
4.  **Comparison (Σύγκριση):** Για τη σύγκριση γεωμετριών σε σχέση με τη χωρική τους συσχέτιση (π.χ., Intersects, Contains, Touches). Αυτές θα αναλυθούν παρακάτω.
5.  **Generation (Δημιουργία):** Για τη δημιουργία νέων γεωμετριών από άλλες ή από δεδομένα (π.χ., ένωση γεωμετριών, δημιουργία buffer).

#### **6. Τύποι Χωρικών Συσχετίσεων**

Οι χωρικές βάσεις δεδομένων μπορούν να απαντήσουν σε ερωτήματα σχετικά με τον τρόπο που δύο γεωμετρίες σχετίζονται μεταξύ τους. Οι πιο κοινές χωρικές σχέσεις περιλαμβάνουν:

*   **Equals:** Οι δύο γεωμετρίες είναι ταυτόσημες.
*   **Intersects:** Οι γεωμετρίες έχουν τουλάχιστον ένα κοινό σημείο.
*   **Disjoint:** Οι γεωμετρίες δεν έχουν κανένα κοινό σημείο, είναι απομακρυσμένες.
*   **Cross:** Οι γεωμετρίες διασταυρώνονται με τέτοιο τρόπο ώστε η τομή τους να έχει χαμηλότερη διάσταση από τις ίδιες τις γεωμετρίες (π.χ., μία γραμμή τέμνει ένα πολύγωνο, ή δύο γραμμές τέμνονται).
*   **Overlap:** Οι γεωμετρίες έχουν κοινή επιφάνεια/όγκο, και η τομή τους είναι της ίδιας διάστασης με τις ίδιες τις γεωμετρίες (π.χ., δύο πολύγωνα που αλληλεπικαλύπτονται).
*   **Touch:** Οι γεωμετρίες αγγίζουν η μία την άλλη στα όριά τους, χωρίς να επικαλύπτονται.
*   **Within / Contains:** Η μία γεωμετρία (π.χ., A) περιέχεται πλήρως μέσα στην άλλη (π.χ., B), ή η άλλη (Β) περιέχει την μία (Α). (π.χ., μια πόλη μέσα σε μια χώρα).
*   **ST_Dwithin (Proximity Query):** Μία ειδική λειτουργία που ελέγχει αν δύο γεωμετρίες βρίσκονται **εντός συγκεκριμένης απόστασης** η μία από την άλλη. Είναι εξαιρετικά χρήσιμη για ερωτήματα γειτνίασης (π.χ., "βρες όλα τα νοσοκομεία σε απόσταση 5 χλμ. από την τοποθεσία μου").

#### **7. Εργαλεία Ανοικτού Κώδικα για Χωρικές Βάσεις Δεδομένων**

Στο χώρο των χωρικών βάσεων δεδομένων, υπάρχουν ισχυρά εργαλεία ανοικτού κώδικα που χρησιμοποιούνται ευρέως:

*   **Server-Side:**
    *   **PostGIS:** Είναι μια **επέκταση της βάσης δεδομένων PostgreSQL** που προσθέτει χωρικές δυνατότητες. Θεωρείται de facto standard για τις χωρικές βάσεις δεδομένων ανοικτού κώδικα, προσφέροντας πλήρη υποστήριξη για χωρικούς τύπους, ευρετήρια και συναρτήσεις. Αποτελεί τη βάση του workshop από το οποίο προέρχονται αυτές οι διαφάνειες.
        *   Επίσημη σελίδα: http://postgis.net/
        *   Tutorial: https://postgis.net/workshops/postgis-intro/
*   **Desktop / Embedded:**
    *   **SpatiaLite:** Είναι μια **χωρική επέκταση της βάσης δεδομένων SQLite**. Προσφέρει ένα ελαφρύ και φορητό περιβάλλον για τη διαχείριση χωρικών δεδομένων, ιδανικό για desktop εφαρμογές ή μικρότερης κλίμακας projects.
        *   Επίσημη σελίδα: https://www.gaia-gis.it/fossil/libspatialite/index
        *   How-to για αρχάριους: http://www.gaia-gis.it/gaia-sins/spatialite-cookbook/index.html
    *   **NYC Geodatabase (tutorial):** Ένα παράδειγμα tutorial που δείχνει τη χρήση χωρικών δεδομένων (ενδεχομένως με SpatiaLite, MS Access/ArcGIS) για τη διαχείριση γεωδεδομένων πόλεων.
        *   Tutorial: https://www.baruch.cuny.edu/confluence/display/geoportal/NYC+Geodatabase

